/* ============================================================
   Component Styles — Desktop Shell UI
   ============================================================
   All desktop-UI component styles: topbar, icons, windows,
   dock, toast, panels, game HUD, music player.
   ============================================================ */

/* ========== LAYOUT ========== */
.desktop-root {
  display               : grid;
  grid-template-rows    : auto 1fr auto;
  grid-template-columns : 1fr;
  block-size            : 100dvh;
  inline-size           : 100dvw;
  overflow              : hidden;
  position              : relative;
  background-image      : url('/wallpaper.webp');
  background-size       : cover;
  background-position   : center;
  background-repeat     : no-repeat;
  background-color      : var(--wallpaper-from);
}

/* ========== TOP BAR ========== */
.topbar {
  display          : flex;
  align-items      : center;
  justify-content  : space-between;
  gap              : var(--space-2);
  padding-inline   : var(--space-4);
  padding-block    : var(--space-1);
  block-size       : 2rem;
  position         : relative;
  z-index          : var(--z-topbar);
  background       : var(--surface-glass);
  backdrop-filter  : blur(24px) saturate(1.5);
  border-block-end : 1px solid var(--border-subtle);
  font-size        : var(--text-sm);
  user-select      : none;
}

.topbar-group {
  display     : flex;
  align-items : center;
  gap         : var(--space-3);
}

.topbar-group--right {
  gap : var(--space-2);
}

.topbar-brand {
  font-weight    : 700;
  letter-spacing : -0.01em;
}

.topbar-menu-btn {
  padding-inline : var(--space-2);
  padding-block  : var(--space-1);
  border-radius  : var(--radius-sm);
  font-size      : var(--text-sm);
  color          : var(--text-secondary);
  transition     : background var(--dur-fast) var(--ease-out),
                   color var(--dur-fast) var(--ease-out);

  &:hover {
    background : var(--icon-hover-bg);
    color      : var(--text-primary);
  }
}

.topbar-menu-btn--open {
  background : var(--icon-selected-bg);
  color      : var(--text-primary);
}

.topbar-menu {
  position : relative;
}

.topbar-dropdown {
  position           : absolute;
  inset-block-start  : 100%;
  inset-inline-start : 0;
  z-index            : calc(var(--z-topbar) + 10);
  min-inline-size    : 14rem;
  padding-block      : var(--space-1);
  margin-block-start : var(--space-1);
  border-radius      : var(--radius-lg);
  background         : var(--surface-overlay);
  backdrop-filter    : blur(24px) saturate(1.4);
  border             : 1px solid var(--border-default);
  box-shadow         : var(--shadow-lg);
  animation          : dropdown-in var(--dur-fast) var(--ease-out) both;
}

.topbar-dropdown-item {
  display         : flex;
  align-items     : center;
  justify-content : space-between;
  gap             : var(--space-4);
  inline-size     : 100%;
  padding-inline  : var(--space-3);
  padding-block   : var(--space-1);
  font-size       : var(--text-sm);
  color           : var(--text-primary);
  text-align      : start;
  border-radius   : 0;
  transition      : background var(--dur-fast) var(--ease-out);

  &:hover:not(:disabled) {
    background : var(--icon-selected-bg);
  }
}

.topbar-dropdown-item--disabled {
  opacity        : 0.4;
  pointer-events : none;
}

.topbar-dropdown-label {
  flex-grow : 1;
}

.topbar-dropdown-shortcut {
  font-size   : var(--text-xs);
  color       : var(--text-muted);
  font-family : var(--font-mono);
  flex-shrink : 0;
}

.topbar-dropdown-sep {
  block-size    : 1px;
  margin-block  : var(--space-1);
  margin-inline : var(--space-2);
  background    : var(--border-subtle);
  border        : none;
}

.topbar-center {
  position           : absolute;
  inset-inline-start : 50%;
  translate          : -50% 0;
}

.topbar-context {
  font-size   : var(--text-sm);
  font-weight : 600;
  color       : var(--text-secondary);
}

.topbar-icon-btn {
  display         : inline-flex;
  align-items     : center;
  justify-content : center;
  inline-size     : 1.5rem;
  block-size      : 1.5rem;
  border-radius   : var(--radius-sm);
  font-size       : var(--text-sm);
  color           : var(--text-secondary);
  transition      : background var(--dur-fast) var(--ease-out),
                    color var(--dur-fast) var(--ease-out);

  &:hover {
    background : var(--icon-hover-bg);
    color      : var(--text-primary);
  }

  & svg {
    inline-size : 0.8125rem;
    block-size  : 0.8125rem;
  }
}

/* ---- Locale toggle (EN | FR) ---- */
.locale-toggle {
  display        : inline-flex;
  align-items    : center;
  border-radius  : var(--radius-sm);
  background     : var(--icon-hover-bg);
  overflow       : hidden;
}

.locale-toggle-btn {
  display         : inline-flex;
  align-items     : center;
  justify-content : center;
  padding-inline  : var(--space-2);
  padding-block   : 0.125rem;
  font-size       : var(--text-xs);
  font-weight     : 600;
  color           : var(--text-tertiary);
  opacity         : 0.45;
  transition      : background var(--dur-fast) var(--ease-out),
                    color var(--dur-fast) var(--ease-out),
                    opacity var(--dur-fast) var(--ease-out);

  &:hover:not(.locale-toggle-btn--active) {
    opacity : 0.7;
  }
}

.locale-toggle-btn--active {
  color   : var(--text-primary);
  opacity : 1;
}

.status-pill {
  display        : inline-flex;
  align-items    : center;
  padding-inline : var(--space-2);
  padding-block  : 0.125rem;
  border-radius  : var(--radius-full);
  background     : var(--icon-hover-bg);
  font-size      : var(--text-xs);
  color          : var(--text-secondary);
}

/* ---- Clock wrapper + Calendar popup ---- */
.topbar-clock-wrapper {
  position : relative;
}

.calendar-popup {
  position           : absolute;
  inset-block-start  : calc(100% + var(--space-2));
  inset-inline-end   : 0;
  z-index            : calc(var(--z-topbar) + 10);
  inline-size        : 15rem;
  padding            : var(--space-3);
  border-radius      : var(--radius-lg);
  background         : var(--surface-overlay);
  backdrop-filter    : blur(24px) saturate(1.4);
  border             : 1px solid var(--border-default);
  box-shadow         : var(--shadow-lg);
  animation          : dropdown-in var(--dur-fast) var(--ease-out) both;
  user-select        : none;
}

.calendar-header {
  display         : flex;
  align-items     : center;
  justify-content : center;
  padding-block   : var(--space-1);
  margin-block-end: var(--space-2);
}

.calendar-month {
  font-size   : var(--text-sm);
  font-weight : 600;
  color       : var(--text-primary);
}

.calendar-grid {
  display               : grid;
  grid-template-columns : repeat(7, 1fr);
  gap                   : 1px;
  text-align            : center;
}

.calendar-cell {
  display         : inline-flex;
  align-items     : center;
  justify-content : center;
  block-size      : 1.6rem;
  font-size       : var(--text-xs);
  color           : var(--text-secondary);
  border-radius   : var(--radius-sm);
}

.calendar-cell--header {
  font-weight    : 600;
  color          : var(--text-muted);
  font-size      : 0.625rem;
  text-transform : uppercase;
  letter-spacing : 0.04em;
}

.calendar-cell--today {
  background    : var(--c-accent);
  color         : var(--c-white);
  font-weight   : 700;
  border-radius : var(--radius-full);
}

.calendar-cell--blank {
  visibility : hidden;
}

/* ========== DESKTOP AREA ========== */
.desktop-area {
  position   : relative;
  overflow   : hidden;
  background : transparent;
}

.desktop-vignette {
  position       : absolute;
  inset          : 0;
  pointer-events : none;
  background     : radial-gradient(
    ellipse at 50% 50%,
    transparent 50%,
    oklch(0% 0 0 / 0.3) 100%
  );
}

/* ========== DESKTOP ICONS ========== */
.desktop-icon {
  position       : absolute;
  display        : flex;
  flex-direction : column;
  align-items    : center;
  gap            : var(--space-1);
  padding        : var(--space-1);
  border-radius  : var(--radius-lg);
  inline-size    : 5.5rem;
  z-index        : var(--z-icons);
  cursor         : default;
  user-select    : none;
  transition     : background var(--dur-fast) var(--ease-out),
                   box-shadow var(--dur-fast) var(--ease-out);

  &:hover {
    background : var(--icon-hover-bg);
  }
}

.desktop-icon--selected {
  background : var(--icon-selected-bg);
  box-shadow : inset 0 0 0 1.5px var(--icon-selected-bd);
}

.desktop-icon-glyph {
  font-size   : 3.25rem;
  line-height : 1;
  filter      : drop-shadow(0 2px 4px oklch(0% 0 0 / 0.25));
}

.desktop-icon-img {
  inline-size   : 48px;
  block-size    : 48px;
  border-radius : var(--radius-xl);
  object-fit    : contain;
  padding       : 0.5rem;
  background    : oklch(98% 0.005 250 / 0.85);
  box-shadow    : 0 1px 4px oklch(0% 0 0 / 0.15);
  filter        : drop-shadow(0 2px 4px oklch(0% 0 0 / 0.25));
}

/* Terminal icon has its own built-in background — skip the white pill */
.desktop-icon-img[src*="terminal"] {
  background : transparent;
  padding    : 0;
  box-shadow : none;
}

/* Profile icon — no white pill, photo fills the space */
.desktop-icon-img[src*="profile"] {
  padding    : 0;
  background : transparent;
  box-shadow : none;
}

.dock-icon-img[src*="profile"] {
  padding     : 0;
  background  : transparent;
  inline-size : 42px;
  block-size  : 42px;
}

.dock-icon-img {
  inline-size   : 32px;
  block-size    : 32px;
  border-radius : var(--radius-lg);
  object-fit    : contain;
  padding       : 0.3rem;
  background    : oklch(98% 0.005 250 / 0.85);
}

.dock-icon-img[src*="terminal"] {
  background  : transparent;
  padding     : 0;
  inline-size : 42px;
  block-size  : 42px;
}

.dock-icon-img[src*="x.svg"],
.dock-icon-img[src*="linkedin"],
.dock-icon-img[src*="github"] {
  inline-size : 42px;
  block-size  : 42px;
}

.desktop-icon-label {
  font-size       : var(--text-xs);
  font-weight     : 600;
  text-align      : center;
  color           : var(--c-white);
  text-shadow     : 0 1px 2px oklch(0% 0 0 / 0.7),
                    0 0 6px oklch(0% 0 0 / 0.4);
  overflow        : hidden;
  text-overflow   : ellipsis;
  white-space     : nowrap;
  max-inline-size : 100%;
}

/* ========== APP WINDOW ========== */
.app-window {
  position        : absolute;
  display         : flex;
  flex-direction  : column;
  min-inline-size : 20rem;
  min-block-size  : 12rem;
  border-radius   : var(--radius-xl);
  background      : var(--surface-window);
  backdrop-filter : blur(20px) saturate(1.4);
  box-shadow      : var(--shadow-xl);
  border          : 1px solid var(--border-subtle);
  overflow        : hidden;
  animation       : window-open var(--dur-normal) var(--ease-spring) both;
}

.app-window-resize {
  position         : absolute;
  inset-block-end  : 0;
  inset-inline-end : 0;
  inline-size      : 1rem;
  block-size       : 1rem;
  cursor           : nwse-resize;
  z-index          : 10;
  background       : transparent;

  &::after {
    content          : '';
    position         : absolute;
    inset-block-end  : 4px;
    inset-inline-end : 4px;
    inline-size      : 8px;
    block-size       : 8px;
    border-inline-end : 2px solid var(--text-muted);
    border-block-end   : 2px solid var(--text-muted);
    opacity          : 0.4;
    transition       : opacity var(--dur-fast) var(--ease-out);
  }

  &:hover::after {
    opacity : 0.8;
  }
}

.app-window-header {
  display          : flex;
  align-items      : center;
  gap              : var(--space-3);
  padding-inline   : var(--space-4);
  padding-block    : var(--space-2);
  background       : var(--surface-header);
  backdrop-filter  : blur(24px) saturate(1.5);
  border-block-end : 1px solid var(--border-subtle);
  cursor           : grab;
  user-select      : none;
  flex-shrink      : 0;

  &:active {
    cursor : grabbing;
  }
}

.traffic-lights {
  display : flex;
  gap     : 0.5rem;
}

.traffic-light {
  display         : inline-flex;
  align-items     : center;
  justify-content : center;
  inline-size     : 0.75rem;
  block-size      : 0.75rem;
  border-radius   : var(--radius-full);
  border          : none;
  padding         : 0;
  cursor          : pointer;
  font-size       : 0;
  line-height     : 1;
  transition      : filter var(--dur-fast) var(--ease-out),
                    transform var(--dur-fast) var(--ease-out);

  &:hover {
    filter    : brightness(1.15);
    transform : scale(1.15);
    font-size : 0.45rem;
  }
}

.traffic-light--close {
  background : radial-gradient(
    circle at 35% 35%,
    #ff8a80 0%,
    #ff5f57 40%,
    #e0443e 100%
  );
  box-shadow : inset 0 1px 0 oklch(100% 0 0 / 0.3),
               inset 0 -1px 1px oklch(0% 0 0 / 0.15),
               0 0.5px 1px oklch(0% 0 0 / 0.25);
  color      : rgba(80, 0, 0, 0);

  &:hover { color : rgba(80, 0, 0, 0.7); }
  &::after { content : '\00d7'; }
}

.traffic-light--minimize {
  background : radial-gradient(
    circle at 35% 35%,
    #ffd95a 0%,
    #febc2e 40%,
    #dfA020 100%
  );
  box-shadow : inset 0 1px 0 oklch(100% 0 0 / 0.35),
               inset 0 -1px 1px oklch(0% 0 0 / 0.12),
               0 0.5px 1px oklch(0% 0 0 / 0.25);
  color      : rgba(100, 60, 0, 0);

  &:hover { color : rgba(100, 60, 0, 0.7); }
  &::after { content : '\2013'; }
}

.traffic-light--focus {
  background : radial-gradient(
    circle at 35% 35%,
    #5edb73 0%,
    #28c840 40%,
    #1aab32 100%
  );
  box-shadow : inset 0 1px 0 oklch(100% 0 0 / 0.3),
               inset 0 -1px 1px oklch(0% 0 0 / 0.15),
               0 0.5px 1px oklch(0% 0 0 / 0.25);
  color      : rgba(0, 60, 10, 0);

  &:hover { color : rgba(0, 60, 10, 0.7); }

  &::after {
    content   : '\25B2';
    font-size : 0.3rem;
  }
}

.app-window-title {
  font-size         : var(--text-sm);
  font-weight       : 600;
  color             : var(--text-secondary);
  flex-grow         : 1;
  text-align        : center;
  margin-inline-end : calc(0.75rem * 3 + var(--space-2) * 2);
}

.app-window-content {
  position             : relative;
  padding              : var(--space-6);
  overflow-y           : auto;
  flex-grow            : 1;
  overscroll-behavior  : contain;
  background           : var(--surface-content);

  &::-webkit-scrollbar {
    inline-size : 8px;
  }
  &::-webkit-scrollbar-track {
    background    : var(--surface-raised);
    border-radius : 4px;
  }
  &::-webkit-scrollbar-thumb {
    background    : var(--icon-selected-bg);
    border-radius : 4px;
  }
  &::-webkit-scrollbar-thumb:hover {
    background : var(--c-accent);
  }

  scrollbar-width : thin;
  scrollbar-color : var(--icon-selected-bg) var(--surface-raised);
}

/* ========== PANEL CONTENT PRIMITIVES ========== */
.panel-heading {
  font-size        : var(--text-xl);
  font-weight      : 700;
  line-height      : var(--leading-tight);
  color            : var(--text-primary);
  margin-block-end : var(--space-3);
}

.panel-paragraph {
  font-size        : var(--text-base);
  line-height      : var(--leading-relaxed);
  color            : var(--text-secondary);
  margin-block-end : var(--space-4);
}

.panel-meta {
  font-size        : var(--text-sm);
  color            : var(--text-muted);
  margin-block-end : var(--space-2);
}

.panel-list {
  padding-inline-start : var(--space-4);
  margin-block-end     : var(--space-4);

  & li {
    position             : relative;
    padding-inline-start : var(--space-3);
    margin-block-end     : var(--space-2);
    font-size            : var(--text-base);
    line-height          : var(--leading-relaxed);
    color                : var(--text-secondary);

    &::before {
      content            : '▸';
      position           : absolute;
      inset-inline-start : 0;
      color              : var(--c-accent);
    }
  }
}

.panel-links {
  display            : flex;
  flex-wrap           : wrap;
  gap                : var(--space-3);
  margin-block-start : var(--space-2);
}

.panel-link {
  display        : inline-flex;
  align-items    : center;
  gap            : var(--space-1);
  padding-inline : var(--space-3);
  padding-block  : var(--space-1);
  border-radius  : var(--radius-full);
  background     : var(--icon-selected-bg);
  color          : var(--c-accent);
  font-size      : var(--text-sm);
  font-weight    : 500;
  transition     : background var(--dur-fast) var(--ease-out),
                   color var(--dur-fast) var(--ease-out);

  &:hover {
    background : var(--c-accent);
    color      : var(--c-white);
  }
}

.project-card {
  padding-block-end : var(--space-6);
  margin-block-end  : var(--space-6);
  border-block-end  : 1px solid var(--border-subtle);

  &:last-child {
    border-block-end  : none;
    margin-block-end  : 0;
    padding-block-end : 0;
  }
}

.projects-grid {
  display               : grid;
  grid-template-columns : 1fr;
  gap                   : 0;
}

.project-header {
  display         : flex;
  align-items     : baseline;
  justify-content : space-between;
  gap             : var(--space-3);
  flex-wrap       : wrap;
  margin-block-end : var(--space-1);
}

.project-title {
  font-size   : var(--text-lg);
  font-weight : 700;
  line-height : var(--leading-tight);
  color       : var(--text-primary);
}

.project-period {
  font-size   : var(--text-xs);
  font-family : var(--font-mono);
  color       : var(--text-muted);
  white-space : nowrap;
}

.project-org {
  display          : inline-block;
  font-size        : var(--text-xs);
  font-weight      : 500;
  color            : var(--c-accent);
  letter-spacing   : 0.02em;
  margin-block-end : var(--space-2);
}

.project-highlight {
  display          : inline-flex;
  align-items      : center;
  gap              : var(--space-1);
  padding-inline   : var(--space-3);
  padding-block    : var(--space-1);
  border-radius    : var(--radius-full);
  background       : oklch(from var(--c-accent) l c h / 0.12);
  color            : var(--c-accent);
  font-size        : var(--text-sm);
  font-weight      : 600;
  font-family      : var(--font-mono);
  margin-block-end : var(--space-3);
}

.project-stack {
  display            : flex;
  flex-wrap          : wrap;
  gap                : var(--space-1);
  margin-block-start : var(--space-1);
}

.project-tag {
  display        : inline-flex;
  padding-inline : var(--space-2);
  padding-block  : 0.125rem;
  border-radius  : var(--radius-sm);
  background     : var(--icon-hover-bg);
  font-size      : var(--text-xs);
  font-family    : var(--font-mono);
  color          : var(--text-secondary);
}

/* ========== RESUME TIMELINE ========== */
.resume-timeline {
  position             : relative;
  padding-inline-start : var(--space-6);
}

.resume-timeline::before {
  content              : '';
  position             : absolute;
  inset-inline-start   : 0.5rem;
  inset-block-start    : 0.25rem;
  inset-block-end      : 0.25rem;
  inline-size          : 2px;
  background           : var(--border-subtle);
}

.resume-entry {
  position          : relative;
  padding-block-end : var(--space-6);
  margin-block-end  : var(--space-2);

  &:last-child {
    padding-block-end : 0;
    margin-block-end  : 0;
  }
}

.resume-dot {
  position             : absolute;
  inset-inline-start   : calc(-1 * var(--space-6) + 0.25rem);
  inset-block-start    : 0.35rem;
  inline-size          : 0.625rem;
  block-size           : 0.625rem;
  border-radius        : var(--radius-full);
  background           : var(--c-accent);
  box-shadow           : 0 0 0 3px var(--surface-base);
}

.resume-content {
  /* spacing reset — content flows naturally */
}

.resume-header {
  display          : flex;
  align-items      : baseline;
  justify-content  : space-between;
  gap              : var(--space-3);
  flex-wrap        : wrap;
  margin-block-end : var(--space-1);
}

.resume-role-row {
  display          : flex;
  align-items      : center;
  gap              : var(--space-2);
  flex-wrap        : wrap;
  margin-block-end : var(--space-1);
}

.resume-role {
  font-size   : var(--text-sm);
  font-weight : 600;
  color       : var(--text-primary);
}

.resume-type {
  font-size        : var(--text-xs);
  padding-inline   : var(--space-2);
  padding-block    : 0.0625rem;
  border-radius    : var(--radius-full);
  background       : var(--icon-hover-bg);
  color            : var(--text-muted);
  font-family      : var(--font-mono);
}

.resume-location {
  display          : block;
  font-size        : var(--text-xs);
  color            : var(--text-muted);
  margin-block-end : var(--space-2);
}

/* ========== DOCK ========== */
.dock {
  display         : flex;
  justify-content : center;
  padding-block   : var(--space-2);
  padding-inline  : var(--space-4);
  position        : relative;
  z-index         : var(--z-dock);
}

.dock-tray {
  display        : flex;
  align-items    : center;
  gap            : var(--space-1);
  padding-inline : var(--space-3);
  padding-block  : var(--space-2);
  border-radius  : var(--radius-2xl);
  background     : var(--dock-bg);
  backdrop-filter: blur(24px) saturate(1.5);
  border         : 1px solid var(--border-subtle);
  box-shadow     : var(--shadow-lg);
}

.dock-launch {
  position        : relative;
  display         : flex;
  align-items     : center;
  justify-content : center;
  inline-size     : 3.75rem;
  block-size      : 3.75rem;
  border-radius   : var(--radius-lg);
  font-size       : 2.5rem;
  transition      : background var(--dur-fast) var(--ease-out),
                    transform var(--dur-fast) var(--ease-spring);

  &:hover {
    background : var(--dock-item-hover);
    transform  : translateY(-4px) scale(1.1);
  }

  &:active {
    transform : translateY(-2px) scale(1.05);
  }
}

.dock-launch-icon {
  line-height : 1;
  font-size   : 2.5rem;
  filter      : drop-shadow(0 1px 2px oklch(0% 0 0 / 0.2));
}

.dock-tooltip {
  position           : absolute;
  inset-block-start  : -2rem;
  inset-inline-start : 50%;
  translate          : -50% 0;
  padding-inline     : var(--space-2);
  padding-block      : 0.125rem;
  border-radius      : var(--radius-sm);
  background         : var(--surface-overlay);
  border             : 1px solid var(--border-subtle);
  font-size          : var(--text-xs);
  font-weight        : 500;
  color              : var(--text-primary);
  white-space        : nowrap;
  opacity            : 0;
  pointer-events     : none;
  transition         : opacity var(--dur-fast) var(--ease-out),
                       translate var(--dur-fast) var(--ease-out);
}

.dock-launch:hover .dock-tooltip {
  opacity   : 1;
  translate : -50% -4px;
}

.dock-separator {
  inline-size   : 2px;
  block-size    : 2rem;
  margin-inline : var(--space-2);
  background    : oklch(60% 0.01 250 / 0.4);
  border-radius : 1px;
  flex-shrink   : 0;
}

.dock-window-dot {
  position           : absolute;
  inset-block-end    : 0;
  inset-inline-start : 50%;
  translate          : -50% 0;
  inline-size        : 0.25rem;
  block-size         : 0.25rem;
  border-radius      : var(--radius-full);
  background         : var(--dock-dot);
  opacity            : 0.8;
  transition         : opacity var(--dur-fast) var(--ease-out);
}

.dock-launch--active {
  background : var(--icon-selected-bg);

  & .dock-window-dot {
    opacity : 1;
  }
}

.dock-launch--minimized {
  opacity : 0.55;
}

/* ========== TOAST ========== */
.toast {
  position        : fixed;
  inset-block-end : var(--space-16);
  inset-inline-end: var(--space-6);
  z-index         : var(--z-toast);
  padding-inline  : var(--space-4);
  padding-block   : var(--space-3);
  border-radius   : var(--radius-lg);
  background      : var(--surface-overlay);
  border          : 1px solid var(--border-subtle);
  box-shadow      : var(--shadow-md);
  font-size       : var(--text-sm);
  color           : var(--text-primary);
  animation       : toast-in var(--dur-slow) var(--ease-spring) both;
  max-inline-size : 20rem;
}

/* ========== GEOWARS GAME ========== */
.geowars-wrapper {
  display        : flex;
  flex-direction : column;
  gap            : var(--space-3);
  block-size     : 100%;
}

.geowars-container {
  position       : relative;
  flex           : 1 1 0;
  min-block-size : 240px;
  border-radius  : var(--radius-md);
  overflow       : hidden;
  background     : #040412;

  & canvas {
    display     : block;
    inline-size : 100%;
    block-size  : 100%;
  }
}

.geowars-hud {
  display     : flex;
  align-items : center;
  gap         : var(--space-4);
  font-size   : var(--text-sm);
  color       : var(--text-secondary);
  flex-wrap   : wrap;
}

.geowars-value {
  font-family : var(--font-mono);
  font-weight : 600;
  color       : var(--c-accent);
}

.geowars-btn {
  padding-inline : var(--space-3);
  padding-block  : var(--space-1);
  border-radius  : var(--radius-md);
  background     : var(--icon-selected-bg);
  color          : var(--c-accent);
  font-size      : var(--text-sm);
  font-weight    : 500;
  transition     : background var(--dur-fast) var(--ease-out);

  &:hover {
    background : var(--c-accent);
    color      : var(--c-white);
  }
}

/* ========== MUSIC PLAYER ========== */
.music-player {
  position        : relative;
  display         : flex;
  flex-direction  : column;
  gap             : var(--space-3);
  block-size      : 100%;
  overflow        : hidden;
}

/* Hide scrollbar on the window content when music player is shown */
.app-window-content:has(.music-player) {
  overflow : hidden;
  padding  : 0;
}

/* Terminal fills the entire window content area */
.app-window-content:has(.terminal-container) {
  overflow : hidden;
  padding  : 0;
}

.music-player-row {
  display       : flex;
  align-items   : center;
  gap           : var(--space-4);
  padding       : var(--space-3) var(--space-4);
  border-radius : var(--radius-md);
  background    : var(--surface-raised);
}

.music-player-art {
  position        : relative;
  inline-size     : 56px;
  block-size      : 56px;
  flex-shrink     : 0;
  border-radius   : 50%;
  background      : linear-gradient(135deg, var(--icon-selected-bg), var(--surface-raised));
  display         : flex;
  align-items     : center;
  justify-content : center;
}

.music-player-art-ring {
  position      : absolute;
  inset         : -3px;
  border-radius : 50%;
  border        : 2px solid transparent;
  transition    : border-color 0.4s var(--ease-out);
}

.music-player-art-ring.active {
  border-color : var(--c-accent);
  animation    : ring-pulse 2s ease-in-out infinite;
}

.music-player-art-icon {
  font-size  : 1.75rem;
  display    : block;
  transition : transform 0.3s var(--ease-out);
}

.music-player-art-icon.spinning {
  animation : disc-spin 3s linear infinite;
}

.music-player-body {
  flex            : 1;
  min-inline-size : 0;
}

.music-player-info {
  margin-block-end : var(--space-2);
}

.music-player-title {
  font-size      : var(--text-base);
  font-weight    : 700;
  color          : var(--text-primary);
  margin         : 0;
  white-space    : nowrap;
  overflow       : hidden;
  text-overflow  : ellipsis;
}

.music-player-artist {
  font-size      : var(--text-xs, 0.75rem);
  color          : var(--text-secondary);
  margin         : 2px 0 0;
  white-space    : nowrap;
  overflow       : hidden;
  text-overflow  : ellipsis;
}

.music-player-progress {
  inline-size : 100%;
}

.music-player-bar {
  block-size    : 3px;
  border-radius : 1.5px;
  background    : var(--surface-overlay);
  overflow      : hidden;
  position      : relative;
}

.music-player-bar--seekable {
  cursor        : pointer;
  block-size    : 6px;
  border-radius : 3px;
  transition    : block-size var(--dur-fast) var(--ease-out);

  &:hover {
    block-size : 10px;
  }
}

.music-player-bar-hover {
  position      : absolute;
  inset-block   : 0;
  inset-inline-start : 0;
  background    : color-mix(in srgb, var(--c-accent) 25%, transparent);
  border-radius : 3px;
  pointer-events : none;
}

.music-player-bar-fill {
  position      : relative;
  block-size    : 100%;
  background    : var(--c-accent);
  border-radius : 3px;
  transition    : width 0.3s linear;
  box-shadow    : 0 0 6px var(--c-accent);
}

.music-player-times {
  display            : flex;
  justify-content    : space-between;
  font-size          : 0.65rem;
  font-family        : var(--font-mono);
  color              : var(--text-secondary);
  margin-block-start : 2px;
}

.music-player-controls {
  flex-shrink : 0;
  display     : flex;
  align-items : center;
  gap         : 4px;
}

.music-player-btn {
  border-radius   : 50%;
  background      : var(--icon-selected-bg);
  color           : var(--c-accent);
  display         : flex;
  align-items     : center;
  justify-content : center;
  transition      : background var(--dur-fast) var(--ease-out),
                    transform var(--dur-fast) var(--ease-out),
                    box-shadow var(--dur-fast) var(--ease-out);
  cursor          : pointer;

  &:hover {
    background : var(--c-accent);
    color      : var(--c-white);
    transform  : scale(1.1);
    box-shadow : 0 0 12px var(--c-accent);
  }

  &:disabled {
    opacity    : 0.4;
    cursor     : default;
    transform  : none;
    box-shadow : none;
  }
}

.music-player-btn--main {
  inline-size : 44px;
  block-size  : 44px;
  font-size   : 1.2rem;
}

.music-player-btn--sm {
  inline-size : 30px;
  block-size  : 30px;
  font-size   : 0.75rem;
}

.music-player-btn--active {
  background : var(--c-accent);
  color      : var(--c-white);
  box-shadow : 0 0 8px var(--c-accent);

  &:hover {
    background : var(--c-accent-hover);
    box-shadow : 0 0 14px var(--c-accent);
  }
}

/* --- EQ Visualizer Bars --- */
.music-player-eq {
  display         : flex;
  align-items     : flex-end;
  justify-content : center;
  gap             : 3px;
  block-size      : 32px;
  padding-inline  : var(--space-4);
}

.eq-bar {
  display       : block;
  inline-size   : 4px;
  min-block-size: 4px;
  border-radius : 1px;
  background    : var(--icon-selected-bg);
  transition    : block-size 60ms linear, background 0.3s ease;
}

.music-player-eq.active .eq-bar {
  background : var(--c-accent);
}

/* --- Volume Control --- */
.music-player-volume {
  display       : flex;
  align-items   : center;
  gap           : var(--space-2);
  padding-inline: var(--space-4);
}

.music-player-volume-icon {
  flex-shrink : 0;
}

.music-player-volume-slider {
  flex           : 1;
  appearance     : none;
  block-size     : 4px;
  border-radius  : 2px;
  background     : var(--surface-overlay);
  outline        : none;
  cursor         : pointer;
  transition     : block-size var(--dur-fast) var(--ease-out);

  &:hover {
    block-size : 6px;
  }

  &::-webkit-slider-thumb {
    appearance     : none;
    inline-size    : 12px;
    block-size     : 12px;
    border-radius  : 50%;
    background     : var(--c-accent);
    cursor         : pointer;
    box-shadow     : 0 0 4px var(--c-accent);
    transition     : transform var(--dur-fast) var(--ease-out),
                     box-shadow var(--dur-fast) var(--ease-out);
  }

  &::-moz-range-thumb {
    inline-size    : 12px;
    block-size     : 12px;
    border         : none;
    border-radius  : 50%;
    background     : var(--c-accent);
    cursor         : pointer;
    box-shadow     : 0 0 4px var(--c-accent);
  }

  &:hover::-webkit-slider-thumb {
    transform  : scale(1.3);
    box-shadow : 0 0 8px var(--c-accent);
  }

  &:hover::-moz-range-thumb {
    transform  : scale(1.3);
    box-shadow : 0 0 8px var(--c-accent);
  }
}

.music-player-volume-pct {
  flex-shrink    : 0;
  inline-size    : 3ch;
  font-size      : 0.65rem;
  font-family    : var(--font-mono);
  color          : var(--text-secondary);
  text-align     : end;
  user-select    : none;
}

.music-player-status {
  position       : absolute;
  inset-inline   : 0;
  block-end      : 0;
  font-size      : 0.65rem;
  color          : var(--text-secondary);
  text-align     : center;
  margin         : 0;
  padding-block  : var(--space-1);
  padding-inline : var(--space-4);
  white-space    : nowrap;
  overflow       : hidden;
  text-overflow  : ellipsis;
  background     : var(--surface-window);
}

/* ========== VIDEO PLAYER ========== */
.video-player {
  position        : relative;
  inline-size     : 100%;
  block-size      : 100%;
  background      : #000;
  display         : flex;
  flex-direction  : column;
  overflow        : hidden;
}

.video-player-frame {
  position       : relative;
  flex           : 1;
  min-block-size : 0;
}

/* Transparent click-interceptor over the iframe.
   Prevents YouTube's native link / fullscreen handling
   and routes all clicks through our custom controls. */
.video-player-overlay {
  position : absolute;
  inset    : 0;
  z-index  : 1;
  cursor   : pointer;
}

/* Make the YT-injected iframe fill the container */
.video-player-frame iframe {
  inline-size : 100%;
  block-size  : 100%;
  border      : none;
}

/* --- Controls bar (below video) --- */
.video-player-controls {
  flex-shrink      : 0;
  display          : flex;
  flex-direction   : column;
  padding-block    : var(--space-2);
  padding-inline   : var(--space-3);
  background       : var(--surface-window);
  border-block-start : 1px solid var(--surface-overlay);
}

/* --- Seek bar --- */
.video-player-bar {
  block-size       : 4px;
  border-radius    : 2px;
  background       : var(--surface-overlay);
  cursor           : pointer;
  position         : relative;
  margin-block-end : var(--space-2);
  transition       : block-size 0.15s ease;
}

.video-player-bar:hover {
  block-size : 6px;
}

.video-player-bar-fill {
  block-size    : 100%;
  border-radius : 2px;
  background    : var(--c-accent);
  box-shadow    : 0 0 6px var(--c-accent);
  transition    : width 0.15s linear;
}

/* --- Controls row --- */
.video-player-controls-row {
  display     : flex;
  align-items : center;
  gap         : var(--space-2);
}

/* --- Buttons --- */
.vp-btn {
  display         : flex;
  align-items     : center;
  justify-content : center;
  inline-size     : 30px;
  block-size      : 30px;
  border-radius   : 50%;
  background      : var(--icon-selected-bg);
  color           : var(--c-accent);
  border          : none;
  cursor          : pointer;
  transition      : background var(--dur-fast) var(--ease-out),
                    transform var(--dur-fast) var(--ease-out);

  &:hover {
    background : var(--c-accent);
    color      : var(--c-white);
    transform  : scale(1.1);
  }

  &:disabled {
    opacity : 0.4;
    cursor  : default;
  }
}

.vp-btn--main {
  inline-size : 36px;
  block-size  : 36px;
}

/* --- Time --- */
.video-player-time {
  font-size   : 0.7rem;
  font-family : var(--font-mono);
  color       : var(--text-secondary);
  white-space : nowrap;
}

/* --- Spacer --- */
.video-player-spacer {
  flex : 1;
}

/* --- Volume slider --- */
.video-player-volume {
  inline-size      : 60px;
  block-size       : 4px;
  accent-color     : var(--c-accent);
  cursor           : pointer;
  appearance       : auto;
}

/* ========== KEYFRAME ANIMATIONS ========== */
@keyframes window-open {
  from {
    opacity   : 0;
    transform : scale(0.92) translateY(8px);
  }
}

@keyframes toast-in {
  from {
    opacity   : 0;
    transform : translateX(1rem);
  }
}

@keyframes disc-spin {
  from { transform : rotate(0deg); }
  to   { transform : rotate(360deg); }
}

/* eq-bounce removed — bars are now driven by Web Audio FFT data */

@keyframes ring-pulse {
  0%, 100% { opacity : 1; }
  50%      { opacity : 0.3; }
}

@keyframes dropdown-in {
  from {
    opacity   : 0;
    transform : translateY(-4px);
  }
}

@keyframes notif-bounce-in {
  0%   { opacity : 0; transform : translateY(100%) scale(0.9); }
  40%  { opacity : 1; transform : translateY(-14%) scale(1.02); }
  60%  {              transform : translateY(6%)  scale(0.98); }
  80%  {              transform : translateY(-3%) scale(1.01); }
  100% {              transform : translateY(0)   scale(1); }
}

@keyframes notif-bounce-out {
  0%   { opacity : 1; transform : translateY(0)    scale(1); }
  100% { opacity : 0; transform : translateY(120%) scale(0.9); }
}

/* ========== NOTIFICATION TOAST ========== */
.notification-stack {
  position         : fixed;
  inset-block-end  : var(--space-8);
  inset-inline-end : var(--space-6);
  z-index          : var(--z-toast);
  display          : flex;
  flex-direction   : column-reverse;
  gap              : var(--space-3);
  pointer-events   : none;
}

.notification-toast {
  position         : relative;
  pointer-events   : auto;
  z-index          : var(--z-toast);
  inline-size      : 18rem;
  padding          : var(--space-4);
  border-radius    : var(--radius-lg);
  background       : var(--surface-overlay);
  backdrop-filter   : blur(24px) saturate(1.4);
  border           : 1px solid var(--border-default);
  box-shadow       : var(--shadow-lg);
  color            : var(--text-primary);
  animation        : notif-bounce-in 600ms var(--ease-out) both;
}

.notification-close {
  position        : absolute;
  inset-block-start  : var(--space-2);
  inset-inline-end   : var(--space-2);
  display         : inline-flex;
  align-items     : center;
  justify-content : center;
  inline-size     : 1.25rem;
  block-size      : 1.25rem;
  border-radius   : var(--radius-full);
  font-size       : var(--text-base);
  line-height     : 1;
  color           : var(--text-muted);
  transition      : background var(--dur-fast) var(--ease-out),
                    color var(--dur-fast) var(--ease-out);

  &:hover {
    background : var(--icon-hover-bg);
    color      : var(--text-primary);
  }
}

.notification-body {
  font-size        : var(--text-sm);
  line-height      : var(--leading-normal);
  color            : var(--text-secondary);
  margin-block-end : var(--space-3);
  padding-inline-end : var(--space-4);
}

.notification-action {
  display        : inline-flex;
  align-items    : center;
  gap            : var(--space-1);
  padding-inline : var(--space-3);
  padding-block  : var(--space-1);
  border-radius  : var(--radius-full);
  background     : var(--icon-selected-bg);
  border         : 1px solid var(--border-subtle);
  color          : var(--text-secondary);
  font-size      : var(--text-sm);
  font-weight    : 500;
  letter-spacing : 0.02em;
  transition     : background var(--dur-fast) var(--ease-out),
                   color var(--dur-fast) var(--ease-out),
                   border-color var(--dur-fast) var(--ease-out);

  &:hover {
    background   : var(--c-accent);
    color        : var(--c-white);
    border-color : var(--c-accent);
  }
}

/* Vue transition hooks for NotificationToast */
.notif-enter-active {
  animation : notif-bounce-in 600ms var(--ease-out) both;
}

.notif-leave-active {
  animation : notif-bounce-out 300ms var(--ease-out) both;
}

/* ========== ABOUT SITE MODAL ========== */
.about-modal-backdrop {
  position        : fixed;
  inset           : 0;
  z-index         : calc(var(--z-toast) + 10);
  display         : flex;
  align-items     : center;
  justify-content : center;
  background      : oklch(0% 0 0 / 0.45);
  backdrop-filter  : blur(6px);
  animation       : about-modal-backdrop-in var(--dur-normal) var(--ease-out) both;
}

.about-modal {
  inline-size     : 20rem;
  padding         : var(--space-6);
  border-radius   : var(--radius-xl);
  background      : var(--surface-overlay);
  border          : 1px solid var(--border-default);
  box-shadow      : var(--shadow-xl);
  text-align      : center;
  animation       : about-modal-in var(--dur-slow) var(--ease-spring) both;
}

.about-modal-close-row {
  display         : flex;
  justify-content : flex-start;
  margin-block-end: var(--space-2);
}

.about-modal-close {
  display         : inline-flex;
  align-items     : center;
  justify-content : center;
  inline-size     : 0.75rem;
  block-size      : 0.75rem;
  border-radius   : var(--radius-full);
  background      : var(--c-red);
  border          : none;
  cursor          : pointer;
  transition      : opacity var(--dur-fast) var(--ease-out);
  padding         : 0;

  &:hover {
    opacity : 0.8;
  }
}

.about-modal-close-dot {
  display       : none;
}

.about-modal-close:hover .about-modal-close-dot {
  display       : block;
  inline-size   : 0.375rem;
  block-size    : 0.375rem;
  color         : oklch(20% 0 0);
}

.about-modal-icon {
  font-size        : 3rem;
  line-height      : 1;
  margin-block-end : var(--space-3);
}

.about-modal-title {
  font-size        : var(--text-lg);
  font-weight      : 700;
  color            : var(--text-primary);
  margin-block-end : var(--space-1);
}

.about-modal-version {
  font-size        : var(--text-xs);
  color            : var(--text-muted);
  margin-block-end : var(--space-3);
}

.about-modal-desc {
  font-size        : var(--text-sm);
  line-height      : var(--leading-normal);
  color            : var(--text-secondary);
  margin-block-end : var(--space-3);
}

.about-modal-author {
  font-size        : var(--text-sm);
  font-weight      : 600;
  color            : var(--text-primary);
  margin-block-end : var(--space-3);
}

.about-modal-links {
  display          : flex;
  align-items      : center;
  justify-content  : center;
  gap              : var(--space-2);
  margin-block-end : var(--space-4);
  font-size        : var(--text-sm);

  & a {
    color      : var(--c-accent);
    transition : color var(--dur-fast) var(--ease-out);

    &:hover {
      color : var(--c-accent-hover);
    }
  }
}

.about-modal-sep {
  color : var(--text-muted);
}

.about-modal-copy {
  font-size : var(--text-xs);
  color     : var(--text-muted);
}

/* Vue transition hooks for AboutSiteModal */
.about-modal-enter-active .about-modal-backdrop,
.about-modal-enter-active {
  animation : about-modal-backdrop-in var(--dur-normal) var(--ease-out) both;
}

.about-modal-leave-active {
  animation : about-modal-backdrop-in var(--dur-fast) var(--ease-out) reverse both;
}

@keyframes about-modal-backdrop-in {
  from { opacity : 0; }
}

@keyframes about-modal-in {
  from {
    opacity   : 0;
    transform : scale(0.85) translateY(8px);
  }
}

/* ========== REDUCED MOTION ========== */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration        : 0.01ms !important;
    animation-iteration-count : 1 !important;
    transition-duration       : 0.01ms !important;
  }
}

/* ========== UTILITIES ========== */
.sr-only {
  position    : absolute;
  inline-size : 1px;
  block-size  : 1px;
  padding     : 0;
  margin      : -1px;
  overflow    : hidden;
  clip        : rect(0, 0, 0, 0);
  white-space : nowrap;
  border      : 0;
}
