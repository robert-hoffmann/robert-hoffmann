/* ============================================================
   Component Styles — Desktop Shell UI
   ============================================================
   All desktop-UI component styles: topbar, icons, windows,
   dock, toast, panels, game HUD, music player.
   ============================================================ */

/* ========== LAYOUT ========== */
.desktop-root {
  --z-bg-lqip     : 0;
  --z-bg-sharp    : 1;
  --z-bg-parallax : 2;

  display               : grid;
  grid-template-rows    : auto 1fr auto;
  grid-template-columns : 1fr;
  block-size            : 100dvh;
  inline-size           : 100dvw;
  overflow              : hidden;
  position              : relative;
  isolation             : isolate;
  background-image      : linear-gradient(135deg, #1a0a35, #9964ac);
  background-color      : #1a0a35;
}

.desktop-background-stack {
  position       : absolute;
  inset          : 0;
  z-index        : var(--z-bg-lqip);
  pointer-events : none;
}

.desktop-bg-layer {
  position            : absolute;
  inset               : 0;
  pointer-events      : none;
  background-size     : cover;
  background-position : center;
  background-repeat   : no-repeat;
  transition          : opacity var(--dur-slow) var(--ease-out),
                        transform var(--dur-fast) var(--ease-out);
}

.desktop-bg-layer--lqip {
  z-index          : var(--z-bg-lqip);
  opacity          : 1;
  transform        : scale(1.03);
  background-image : url('/wallpaper-lqip.webp'),
                     linear-gradient(135deg, #1a0a35, #9964ac);
  filter           : blur(16px) saturate(1.1);
}

.desktop-bg-layer--sharp {
  --desktop-sharp-image : none;

  z-index          : var(--z-bg-sharp);
  opacity          : 0;
  transform        : scale(1.03);
  background-image : var(--desktop-sharp-image),
                     linear-gradient(135deg, #1a0a35, #9964ac);
}

.desktop-bg-layer--parallax {
  z-index  : var(--z-bg-parallax);
  opacity  : 0;
  overflow : hidden;
}

.desktop-bg-layer--visible {
  opacity : 1;
}

.desktop-bg-layer--hidden {
  opacity : 0;
}

.desktop-bg-layer--parallax .desktop-parallax-scene {
  position       : absolute;
  inset          : 0;
  pointer-events : none;
  opacity : 1;
}

.desktop-parallax-container {
  position        : absolute;
  inset           : 0;
  transform-style : preserve-3d;
  will-change     : transform;
}

.desktop-parallax-layer {
  --parallax-layer-image : none;

  position            : absolute;
  pointer-events      : none;
  backface-visibility : hidden;
  will-change         : transform;

  background-image    : var(--parallax-layer-image);
}

@media (prefers-reduced-motion: reduce) {
  .desktop-bg-layer,
  .desktop-parallax-scene {
    transition : none;
  }
}

/* ========== TOP BAR ========== */
.topbar {
  display          : flex;
  align-items      : center;
  justify-content  : space-between;
  gap              : var(--space-2);
  padding-inline   : var(--space-4);
  padding-block    : var(--space-1);
  block-size       : 2rem;
  position         : relative;
  z-index          : var(--z-topbar);
  background       : var(--surface-glass);
  border-block-end : 1px solid var(--border-subtle);
  font-size        : var(--text-sm);
  user-select      : none;
}

.topbar-group {
  display     : flex;
  align-items : center;
  gap         : var(--space-3);
}

.topbar-group--right {
  gap : var(--space-2);
}

.topbar-brand {
  font-weight    : 700;
  letter-spacing : -0.01em;
}

.topbar-menu-btn {
  padding-inline : var(--space-2);
  padding-block  : var(--space-1);
  border-radius  : var(--radius-sm);
  font-size      : var(--text-sm);
  color          : var(--text-secondary);
  transition     : background var(--dur-fast) var(--ease-out),
                   color var(--dur-fast) var(--ease-out);

  &:hover {
    background : var(--icon-hover-bg);
    color      : var(--text-primary);
  }
}

.topbar-menu-btn--open {
  background : var(--icon-selected-bg);
  color      : var(--text-primary);
}

.topbar-menu {
  position : relative;
}

.topbar-dropdown {
  position           : absolute;
  inset-block-start  : 100%;
  inset-inline-start : 0;
  z-index            : calc(var(--z-topbar) + 10);
  min-inline-size    : 14rem;
  padding-block      : var(--space-1);
  margin-block-start : var(--space-1);
  border-radius      : var(--radius-lg);
  background         : var(--surface-overlay);
  backdrop-filter    : none;
  border             : 1px solid var(--border-default);
  box-shadow         : var(--shadow-lg);
  animation          : dropdown-in var(--dur-fast) var(--ease-out) both;
}

.topbar-dropdown-item {
  display         : flex;
  align-items     : center;
  justify-content : space-between;
  gap             : var(--space-4);
  inline-size     : 100%;
  padding-inline  : var(--space-3);
  padding-block   : var(--space-1);
  font-size       : var(--text-sm);
  color           : var(--text-primary);
  text-align      : start;
  border-radius   : 0;
  transition      : background var(--dur-fast) var(--ease-out);

  &:hover:not(:disabled) {
    background : var(--icon-selected-bg);
  }
}

.topbar-dropdown-item--disabled {
  opacity        : 0.4;
  pointer-events : none;
}

.topbar-dropdown-label {
  flex-grow : 1;
}

.topbar-dropdown-shortcut {
  font-size   : var(--text-xs);
  color       : var(--text-muted);
  font-family : var(--font-mono);
  flex-shrink : 0;
}

.topbar-dropdown-sep {
  block-size    : 1px;
  margin-block  : var(--space-1);
  margin-inline : var(--space-2);
  background    : var(--border-subtle);
  border        : none;
}

.topbar-center {
  position           : absolute;
  inset-inline-start : 50%;
  translate          : -50% 0;
}

.topbar-context {
  font-size   : var(--text-sm);
  font-weight : 600;
  color       : var(--text-secondary);
}

.topbar-icon-btn {
  display         : inline-flex;
  align-items     : center;
  justify-content : center;
  inline-size     : 1.5rem;
  block-size      : 1.5rem;
  border-radius   : var(--radius-sm);
  font-size       : var(--text-sm);
  color           : var(--text-secondary);
  transition      : background var(--dur-fast) var(--ease-out),
                    color var(--dur-fast) var(--ease-out);

  &:hover {
    background : var(--icon-hover-bg);
    color      : var(--text-primary);
  }

  & svg {
    inline-size : 0.8125rem;
    block-size  : 0.8125rem;
  }
}

/* ---- Locale toggle (EN | FR) ---- */
.locale-toggle {
  display        : inline-flex;
  align-items    : center;
  border-radius  : var(--radius-sm);
  background     : var(--icon-hover-bg);
  overflow       : hidden;
}

.locale-toggle-btn {
  display         : inline-flex;
  align-items     : center;
  justify-content : center;
  padding-inline  : var(--space-2);
  padding-block   : 0.125rem;
  font-size       : var(--text-xs);
  font-weight     : 600;
  color           : var(--text-tertiary);
  opacity         : 0.45;
  transition      : background var(--dur-fast) var(--ease-out),
                    color var(--dur-fast) var(--ease-out),
                    opacity var(--dur-fast) var(--ease-out);

  &:hover:not(.locale-toggle-btn--active) {
    opacity : 0.7;
  }
}

.locale-toggle-btn--active {
  color   : var(--text-primary);
  opacity : 1;
}

.status-pill {
  display        : inline-flex;
  align-items    : center;
  padding-inline : var(--space-2);
  padding-block  : 0.125rem;
  border-radius  : var(--radius-full);
  background     : var(--icon-hover-bg);
  font-size      : var(--text-xs);
  color          : var(--text-secondary);
}

/* ---- Clock wrapper + Calendar popup ---- */
.topbar-clock-wrapper {
  position : relative;
}

.calendar-popup {
  position           : absolute;
  inset-block-start  : calc(100% + var(--space-2));
  inset-inline-end   : 0;
  z-index            : calc(var(--z-topbar) + 10);
  inline-size        : 15rem;
  padding            : var(--space-3);
  border-radius      : var(--radius-lg);
  background         : var(--surface-overlay);
  backdrop-filter    : none;
  border             : 1px solid var(--border-default);
  box-shadow         : var(--shadow-lg);
  animation          : dropdown-in var(--dur-fast) var(--ease-out) both;
  user-select        : none;
}

.calendar-header {
  display         : flex;
  align-items     : center;
  justify-content : center;
  padding-block   : var(--space-1);
  margin-block-end: var(--space-2);
}

.calendar-month {
  font-size   : var(--text-sm);
  font-weight : 600;
  color       : var(--text-primary);
}

.calendar-grid {
  display               : grid;
  grid-template-columns : repeat(7, 1fr);
  gap                   : 1px;
  text-align            : center;
}

.calendar-cell {
  display         : inline-flex;
  align-items     : center;
  justify-content : center;
  block-size      : 1.6rem;
  font-size       : var(--text-xs);
  color           : var(--text-secondary);
  border-radius   : var(--radius-sm);
}

.calendar-cell--header {
  font-weight    : 600;
  color          : var(--text-muted);
  font-size      : 0.625rem;
  text-transform : uppercase;
  letter-spacing : 0.04em;
}

.calendar-cell--today {
  background    : var(--c-accent);
  color         : var(--c-white);
  font-weight   : 700;
  border-radius : var(--radius-full);
}

.calendar-cell--blank {
  visibility : hidden;
}

/* ========== DESKTOP AREA ========== */
.desktop-area {
  position   : relative;
  overflow   : hidden;
  background : transparent;
}

.desktop-vignette {
  position       : absolute;
  inset          : 0;
  pointer-events : none;
  background     : radial-gradient(
    ellipse at 50% 50%,
    transparent 50%,
    oklch(0% 0 0 / 0.3) 100%
  );
}

/* ========== DESKTOP ICONS ========== */
.desktop-icon {
  position       : absolute;
  display        : flex;
  flex-direction : column;
  align-items    : center;
  gap            : var(--space-1);
  padding        : var(--space-1);
  border-radius  : var(--radius-lg);
  inline-size    : 5.5rem;
  z-index        : var(--z-icons);
  cursor         : default;
  user-select    : none;
  touch-action   : manipulation;
  transition     : background var(--dur-fast) var(--ease-out),
                   box-shadow var(--dur-fast) var(--ease-out);

  &:hover {
    background : var(--icon-hover-bg);
  }
}

.desktop-icon--touch-desktop {
  /*
   * Stronger touch-action for reliable long-press drag on tablets.
   * Taps still work; browser panning/zoom gestures should not steal the drag.
   */
  touch-action         : none;
  -webkit-touch-callout: none;
}

.desktop-icon--selected {
  background : var(--icon-selected-bg);
  box-shadow : inset 0 0 0 1.5px var(--icon-selected-bd);
}

.desktop-icon-glyph {
  font-size   : 3.25rem;
  line-height : 1;
}

/* Sprite metadata follows design/icons/desktop-profile-icons.md */
.icon-sprite {
  --sprite-cols     : 4;
  --sprite-rows     : 3;
  --sprite-cell-w   : 210px;
  --sprite-cell-h   : 200px;
  --sprite-pad      : 4px;
  --sprite-col      : 0;
  --sprite-row      : 0;
  --sprite-icon-w   : calc(var(--sprite-cell-w) - (var(--sprite-pad) * 2));
  --sprite-icon-h   : calc(var(--sprite-cell-h) - (var(--sprite-pad) * 2));
  --sprite-target-w : 48px;
  --sprite-sheet-w  : calc(var(--sprite-cols) * var(--sprite-cell-w));
  --sprite-sheet-h  : calc(var(--sprite-rows) * var(--sprite-cell-h));
  --sprite-scale    : calc(var(--sprite-target-w) / var(--sprite-icon-w));

  display           : inline-block;
  inline-size       : var(--sprite-target-w);
  block-size        : calc(var(--sprite-icon-h) * var(--sprite-scale));
  flex-shrink       : 0;
  background-image  : var(--desktop-sprite-url);
  background-repeat : no-repeat;
  background-size   : calc(var(--sprite-sheet-w) * var(--sprite-scale))
                      calc(var(--sprite-sheet-h) * var(--sprite-scale));
  background-position : calc((var(--sprite-col) * var(--sprite-cell-w) + var(--sprite-pad)) * -1 * var(--sprite-scale))
                        calc((var(--sprite-row) * var(--sprite-cell-h) + var(--sprite-pad)) * -1 * var(--sprite-scale));
}

.desktop-icon-sprite {
  --sprite-target-w : 48px;
}

.dock-icon-sprite {
  --sprite-target-w : 48px;
}

.icon-sprite--joystick {
  --sprite-col : 0;
  --sprite-row : 0;
}

.icon-sprite--video {
  --sprite-col : 1;
  --sprite-row : 0;
}

.icon-sprite--terminal {
  --sprite-col : 2;
  --sprite-row : 0;
}

.icon-sprite--social-github {
  --sprite-col : 3;
  --sprite-row : 0;
}

.icon-sprite--profile {
  --sprite-col : 0;
  --sprite-row : 1;
}

.icon-sprite--trashcan {
  --sprite-col : 1;
  --sprite-row : 1;
}

.icon-sprite--projects {
  --sprite-col : 2;
  --sprite-row : 1;
}

.icon-sprite--social-x {
  --sprite-col : 3;
  --sprite-row : 1;
}

.icon-sprite--music {
  --sprite-col : 0;
  --sprite-row : 2;
}

.icon-sprite--social-linkedin {
  --sprite-col : 1;
  --sprite-row : 2;
}

.icon-sprite--resume {
  --sprite-col : 2;
  --sprite-row : 2;
}

/* Fallback-only path when no sprite class is mapped. */
.desktop-icon-img {
  inline-size   : 48px;
  block-size    : 48px;
  border-radius : var(--radius-xl);
  object-fit    : contain;
  padding       : 0.5rem;
  background    : oklch(98% 0.005 250 / 0.85);
  box-shadow    : 0 1px 4px oklch(0% 0 0 / 0.15);
}

/* Terminal icon has its own built-in background — skip the white pill */
.desktop-icon-img[src*="terminal"] {
  background : transparent;
  padding    : 0;
  box-shadow : none;
}

/* Profile icon — no white pill, photo fills the space */
.desktop-icon-img[src*="profile"] {
  padding    : 0;
  background : transparent;
  box-shadow : none;
}

.dock-icon-img[src*="profile"] {
  padding     : 0;
  background  : transparent;
  inline-size : 48px;
  block-size  : 48px;
}

/* Fallback-only path when no sprite class is mapped. */
.dock-icon-img {
  inline-size   : 48px;
  block-size    : 48px;
  border-radius : var(--radius-lg);
  object-fit    : contain;
  padding       : 0.3rem;
  background    : oklch(98% 0.005 250 / 0.85);
}

.dock-icon-img[src*="terminal"] {
  background  : transparent;
  padding     : 0;
  inline-size : 48px;
  block-size  : 48px;
}

.dock-icon-img[src*="x.svg"],
.dock-icon-img[src*="linkedin"],
.dock-icon-img[src*="github"] {
  inline-size : 48px;
  block-size  : 48px;
}

.desktop-icon-label {
  font-size       : var(--text-xs);
  font-weight     : 600;
  text-align      : center;
  color           : var(--c-white);
  text-shadow     : 0 1px 2px oklch(0% 0 0 / 0.5);
  overflow        : hidden;
  text-overflow   : ellipsis;
  white-space     : nowrap;
  max-inline-size : 100%;
}

/* ========== APP WINDOW ========== */
.app-window-shell {
  position        : absolute;
  overflow        : visible;
  isolation       : isolate;
}

.app-window {
  position        : relative;
  z-index         : 2;
  display         : flex;
  flex-direction  : column;
  inline-size     : 100%;
  block-size      : 100%;
  min-inline-size : 20rem;
  min-block-size  : 12rem;
  border-radius   : var(--radius-xl);
  background      : transparent;
  box-shadow      : var(--shadow-xl);
  border          : 1px solid var(--border-subtle);
  overflow        : hidden;
  animation       : window-open var(--dur-normal) var(--ease-spring) both;
}

.app-window-resize-zone {
  position     : absolute;
  z-index      : 10;
  background   : transparent;
  touch-action : none;
}

.app-window-resize-zone--n {
  inset-block-start : 0;
  inset-inline      : 0;
  block-size        : 0.5rem;
  cursor            : ns-resize;
}

.app-window-resize-zone--s {
  inset-block-end : 0;
  inset-inline    : 0;
  block-size      : 0.5rem;
  cursor          : ns-resize;
}

.app-window-resize-zone--e {
  inset-block      : 0;
  inset-inline-end : 0;
  inline-size      : 0.5rem;
  cursor           : ew-resize;
}

.app-window-resize-zone--w {
  inset-block        : 0;
  inset-inline-start : 0;
  inline-size        : 0.5rem;
  cursor             : ew-resize;
}

.app-window-resize-zone--ne,
.app-window-resize-zone--nw,
.app-window-resize-zone--se,
.app-window-resize-zone--sw {
  inline-size : 0.875rem;
  block-size  : 0.875rem;
  z-index     : 11;
}

.app-window-resize-zone--ne {
  inset-block-start : 0;
  inset-inline-end  : 0;
  cursor            : nesw-resize;
}

.app-window-resize-zone--nw {
  inset-block-start   : 0;
  inset-inline-start  : 0;
  cursor              : nwse-resize;
}

.app-window-resize-zone--sw {
  inset-block-end    : 0;
  inset-inline-start : 0;
  cursor             : nesw-resize;
}

.app-window-resize-zone--se {
  inset-block-end  : 0;
  inset-inline-end : 0;
  cursor           : nwse-resize;

  &::after {
    content            : '';
    position           : absolute;
    inset-block-end    : 4px;
    inset-inline-end   : 4px;
    inline-size        : 8px;
    block-size         : 8px;
    border-inline-end  : 2px solid var(--text-muted);
    border-block-end   : 2px solid var(--text-muted);
    opacity            : 0.4;
    transition         : opacity var(--dur-fast) var(--ease-out);
    pointer-events     : none;
  }

  &:hover::after {
    opacity : 0.8;
  }
}

.app-window-header {
  display          : flex;
  align-items      : center;
  gap              : var(--space-3);
  padding-inline   : var(--space-4);
  padding-block    : var(--space-2);
  position         : relative;
  isolation        : isolate;
  background       : transparent;
  cursor           : grab;
  user-select      : none;
  touch-action     : none;
  flex-shrink      : 0;

  &::before {
    content           : '';
    position          : absolute;
    inset             : 0;
    z-index           : 0;
    pointer-events    : none;
    background        : var(--surface-header);
    border-block-end  : 1px solid var(--border-subtle);
  }

  & > * {
    position : relative;
    z-index  : 1;
  }

  &:active {
    cursor : grabbing;
  }
}

.traffic-lights {
  display   : flex;
  gap       : var(--traffic-light-hit-gap);
  transform : translateX(var(--traffic-light-inline-offset));
}

.app-window-nope {
  position           : absolute;
  inset-block-start  : 0;
  inset-inline-start : calc(
    var(--space-4) +
    var(--traffic-light-inline-offset) +
    (var(--traffic-light-hit-size) * 2)
  );
  inline-size        : var(--nope-penguin-size);
  block-size         : var(--nope-penguin-size);
  z-index            : 1;
  pointer-events     : none;
  user-select        : none;
  object-fit         : contain;
  opacity            : 0;
  transform          : translate(-50%, 34%);
  filter             : drop-shadow(0 6px 10px oklch(0% 0 0 / 0.32));
  animation          : nope-peek var(--nope-peek-duration) var(--ease-out) both;
  will-change        : transform, opacity;
}

.traffic-light {
  --traffic-light-core : oklch(82% 0.13 24);
  --traffic-light-mid  : oklch(70% 0.2 24);
  --traffic-light-rim  : oklch(58% 0.18 24);
  --traffic-light-glow : oklch(70% 0.2 24 / var(--traffic-light-hover-glow-alpha));
  --traffic-light-dot-shift-x: 0px;

  position        : relative;
  display         : inline-flex;
  align-items     : center;
  justify-content : center;
  inline-size     : var(--traffic-light-hit-size);
  block-size      : var(--traffic-light-hit-size);
  border-radius   : var(--radius-full);
  overflow        : visible;
  border          : none;
  padding         : 0;
  cursor          : pointer;
  line-height     : 1;

  &:focus-visible {
    outline        : 2px solid var(--focus-ring);
    outline-offset : 2px;
  }

  &::before {
    content            : '';
    position           : absolute;
    inset-block-start  : 50%;
    inset-inline-start : 50%;
    inline-size        : var(--traffic-light-dot-size);
    block-size         : var(--traffic-light-dot-size);
    border-radius      : var(--radius-full);
    border             : 1px solid color-mix(in oklch, var(--traffic-light-rim) 74%, oklch(0% 0 0 / 0.36));
    pointer-events     : none;
    background         : radial-gradient(
                           circle at 28% 22%,
                           oklch(100% 0 0 / 0.58) 0%,
                           oklch(100% 0 0 / 0) 34%
                         ),
                         linear-gradient(
                           180deg,
                           oklch(100% 0 0 / 0.22) 0%,
                           transparent 45%
                         ),
                         radial-gradient(
                           circle at 34% 34%,
                           var(--traffic-light-core) 0%,
                           var(--traffic-light-mid) 54%,
                           var(--traffic-light-rim) 100%
                         );
    box-shadow         : inset 0 1px 1px oklch(100% 0 0 / 0.42),
                         inset 0 -1px 1px oklch(0% 0 0 / 0.2),
                         0 1px 1px oklch(0% 0 0 / 0.26);
    transform          : translate(calc(-50% + var(--traffic-light-dot-shift-x)), -50%);
    transition         : border-color var(--dur-fast) var(--ease-out),
                         box-shadow var(--dur-fast) var(--ease-out),
                         filter var(--dur-fast) var(--ease-out),
                         transform var(--dur-fast) var(--ease-out);
  }

  &:hover::before {
    border-color : color-mix(in oklch, var(--traffic-light-rim) 76%, oklch(100% 0 0 / 0.2));
    filter       : brightness(var(--traffic-light-hover-brightness)) saturate(1.06);
    transform    : translate(calc(-50% + var(--traffic-light-dot-shift-x)), -50%)
                   scale(var(--traffic-light-hover-scale));
    box-shadow   : inset 0 1px 1px oklch(100% 0 0 / 0.46),
                   inset 0 -1px 1px oklch(0% 0 0 / 0.22),
                   0 1px 1px oklch(0% 0 0 / 0.3);
  }

  &:active::before {
    filter     : brightness(1.05) saturate(1.04);
    transform  : translate(calc(-50% + var(--traffic-light-dot-shift-x)), -50%)
                 scale(1.08);
    box-shadow : inset 0 1px 1px oklch(100% 0 0 / 0.44),
                 inset 0 -1px 1px oklch(0% 0 0 / 0.24),
                 0 1px 1px oklch(0% 0 0 / 0.26);
  }
}

.traffic-light--close {
  --traffic-light-core : oklch(82% 0.13 24);
  --traffic-light-mid  : oklch(70% 0.2 24);
  --traffic-light-rim  : oklch(58% 0.18 24);
  --traffic-light-glow : oklch(70% 0.2 24 / var(--traffic-light-hover-glow-alpha));
  --traffic-light-dot-shift-x: 0.25rem;
}

.traffic-light--minimize {
  --traffic-light-core : oklch(90% 0.12 92);
  --traffic-light-mid  : oklch(83% 0.16 90);
  --traffic-light-rim  : oklch(72% 0.15 88);
  --traffic-light-glow : oklch(83% 0.16 90 / var(--traffic-light-hover-glow-alpha));
}

.traffic-light--focus {
  --traffic-light-core : oklch(84% 0.13 145);
  --traffic-light-mid  : oklch(73% 0.19 145);
  --traffic-light-rim  : oklch(60% 0.17 145);
  --traffic-light-glow : oklch(73% 0.19 145 / var(--traffic-light-hover-glow-alpha));
  --traffic-light-dot-shift-x: -0.25rem;
}

@media (prefers-reduced-motion: reduce) {
  .traffic-light::before {
    transition : border-color var(--dur-fast) var(--ease-out),
                 box-shadow var(--dur-fast) var(--ease-out);
  }

  .traffic-light:hover::before,
  .traffic-light:active::before {
    filter    : none;
    transform : translate(calc(-50% + var(--traffic-light-dot-shift-x)), -50%);
  }
}

.app-window-title {
  font-size         : var(--text-sm);
  font-weight       : 600;
  color             : var(--text-secondary);
  flex-grow         : 1;
  text-align        : center;
  margin-inline-end : calc(var(--traffic-light-dot-size) * 3 + var(--traffic-light-visual-gap) * 2);
}

.app-window-content {
  position             : relative;
  padding              : var(--space-6);
  overflow-y           : auto;
  flex-grow            : 1;
  overscroll-behavior  : contain;
  background           : var(--surface-window);

  &::-webkit-scrollbar {
    inline-size : 8px;
  }
  &::-webkit-scrollbar-track {
    background    : var(--surface-raised);
    border-radius : 4px;
  }
  &::-webkit-scrollbar-thumb {
    background    : var(--icon-selected-bg);
    border-radius : 4px;
  }
  &::-webkit-scrollbar-thumb:hover {
    background : var(--c-accent);
  }

  scrollbar-width : thin;
  scrollbar-color : var(--icon-selected-bg) var(--surface-raised);
}

/* ========== PANEL CONTENT PRIMITIVES ========== */
.panel-heading {
  font-size        : var(--text-xl);
  font-weight      : 700;
  line-height      : var(--leading-tight);
  color            : var(--text-primary);
  margin-block-end : var(--space-3);
}

.panel-paragraph {
  font-size        : var(--text-base);
  line-height      : var(--leading-relaxed);
  color            : var(--text-secondary);
  margin-block-end : var(--space-4);
}

.panel-meta {
  font-size        : var(--text-sm);
  color            : var(--text-muted);
  margin-block-end : var(--space-2);
}

.panel-list {
  padding-inline-start : var(--space-4);
  margin-block-end     : var(--space-4);

  & li {
    position             : relative;
    padding-inline-start : var(--space-3);
    margin-block-end     : var(--space-2);
    font-size            : var(--text-base);
    line-height          : var(--leading-relaxed);
    color                : var(--text-secondary);

    &::before {
      content            : '▸';
      position           : absolute;
      inset-inline-start : 0;
      color              : var(--c-accent);
    }
  }
}

.panel-links {
  display            : flex;
  flex-wrap           : wrap;
  gap                : var(--space-3);
  margin-block-start : var(--space-2);
}

.panel-link {
  display        : inline-flex;
  align-items    : center;
  gap            : var(--space-1);
  padding-inline : var(--space-3);
  padding-block  : var(--space-1);
  border-radius  : var(--radius-full);
  background     : var(--icon-selected-bg);
  color          : var(--c-accent);
  font-size      : var(--text-sm);
  font-weight    : 500;
  transition     : background var(--dur-fast) var(--ease-out),
                   color var(--dur-fast) var(--ease-out);

  &:hover {
    background : var(--c-accent);
    color      : var(--c-white);
  }
}

.project-card {
  padding-block-end : var(--space-6);
  margin-block-end  : var(--space-6);
  border-block-end  : 1px solid var(--border-subtle);

  &:last-child {
    border-block-end  : none;
    margin-block-end  : 0;
    padding-block-end : 0;
  }
}

.projects-grid {
  display               : grid;
  grid-template-columns : 1fr;
  gap                   : 0;
}

.project-header {
  display         : flex;
  align-items     : baseline;
  justify-content : space-between;
  gap             : var(--space-3);
  flex-wrap       : wrap;
  margin-block-end : var(--space-1);
}

.project-title {
  font-size   : var(--text-lg);
  font-weight : 700;
  line-height : var(--leading-tight);
  color       : var(--text-primary);
}

.project-period {
  font-size   : var(--text-xs);
  font-family : var(--font-mono);
  color       : var(--text-muted);
  white-space : nowrap;
}

.project-org {
  display          : inline-block;
  font-size        : var(--text-xs);
  font-weight      : 500;
  color            : var(--c-accent);
  letter-spacing   : 0.02em;
  margin-block-end : var(--space-2);
}

.project-highlight {
  display          : inline-flex;
  align-items      : center;
  gap              : var(--space-1);
  padding-inline   : var(--space-3);
  padding-block    : var(--space-1);
  border-radius    : var(--radius-full);
  background       : oklch(from var(--c-accent) l c h / 0.12);
  color            : var(--c-accent);
  font-size        : var(--text-sm);
  font-weight      : 600;
  font-family      : var(--font-mono);
  margin-block-end : var(--space-3);
}

.project-stack {
  display            : flex;
  flex-wrap          : wrap;
  gap                : var(--space-1);
  margin-block-start : var(--space-1);
}

.project-tag {
  display        : inline-flex;
  padding-inline : var(--space-2);
  padding-block  : 0.125rem;
  border-radius  : var(--radius-sm);
  background     : var(--icon-hover-bg);
  font-size      : var(--text-xs);
  font-family    : var(--font-mono);
  color          : var(--text-secondary);
}

/* ========== RESUME TIMELINE ========== */
.resume-timeline {
  position             : relative;
  padding-inline-start : var(--space-6);
}

.resume-timeline::before {
  content              : '';
  position             : absolute;
  inset-inline-start   : 0.5rem;
  inset-block-start    : 0.25rem;
  inset-block-end      : 0.25rem;
  inline-size          : 2px;
  background           : var(--border-subtle);
}

.resume-entry {
  position          : relative;
  padding-block-end : var(--space-6);
  margin-block-end  : var(--space-2);

  &:last-child {
    padding-block-end : 0;
    margin-block-end  : 0;
  }
}

.resume-dot {
  position             : absolute;
  inset-inline-start   : calc(-1 * var(--space-6) + 0.25rem);
  inset-block-start    : 0.35rem;
  inline-size          : 0.625rem;
  block-size           : 0.625rem;
  border-radius        : var(--radius-full);
  background           : var(--c-accent);
  box-shadow           : 0 0 0 3px var(--surface-base);
}

.resume-content {
  /* spacing reset — content flows naturally */
}

.resume-header {
  display          : flex;
  align-items      : baseline;
  justify-content  : space-between;
  gap              : var(--space-3);
  flex-wrap        : wrap;
  margin-block-end : var(--space-1);
}

.resume-role-row {
  display          : flex;
  align-items      : center;
  gap              : var(--space-2);
  flex-wrap        : wrap;
  margin-block-end : var(--space-1);
}

.resume-role {
  font-size   : var(--text-sm);
  font-weight : 600;
  color       : var(--text-primary);
}

.resume-type {
  font-size        : var(--text-xs);
  padding-inline   : var(--space-2);
  padding-block    : 0.0625rem;
  border-radius    : var(--radius-full);
  background       : var(--icon-hover-bg);
  color            : var(--text-muted);
  font-family      : var(--font-mono);
}

.resume-location {
  display          : block;
  font-size        : var(--text-xs);
  color            : var(--text-muted);
  margin-block-end : var(--space-2);
}

/* ========== DOCK ========== */
.dock {
  display         : flex;
  justify-content : center;
  padding-block   : var(--space-2);
  padding-inline  : var(--space-4);
  position        : relative;
  z-index         : var(--z-dock);
}

.dock-tray {
  display        : flex;
  align-items    : center;
  gap            : var(--space-2);
  padding-inline : var(--space-3);
  padding-block  : var(--space-2);
  border-radius  : var(--radius-2xl);
  background     : var(--dock-bg);
  border         : 1px solid var(--border-subtle);
  box-shadow     : var(--shadow-lg);
}

.dock-launch {
  position        : relative;
  display         : flex;
  align-items     : center;
  justify-content : center;
  inline-size     : 3.75rem;
  block-size      : 3.75rem;
  border-radius   : var(--radius-lg);
  font-size       : 2.5rem;
  transition      : background var(--dur-fast) var(--ease-out),
                    transform var(--dur-fast) var(--ease-spring);

  &:hover {
    background : var(--dock-item-hover);
    transform  : translateY(-4px) scale(1.1);
  }

  &:active {
    transform : translateY(-2px) scale(1.05);
  }
}

.dock-launch-icon {
  line-height : 1;
  font-size   : 3rem;
  filter      : drop-shadow(0 1px 2px oklch(0% 0 0 / 0.2));
}

.dock-tooltip {
  position           : absolute;
  inset-block-start  : -1.5rem;
  inset-inline-start : 50%;
  translate          : -50% 0;
  padding-inline     : var(--space-2);
  padding-block      : 0.125rem;
  border-radius      : var(--radius-sm);
  background         : var(--surface-overlay);
  border             : 1px solid var(--border-subtle);
  font-size          : var(--text-xs);
  font-weight        : 500;
  color              : var(--text-primary);
  white-space        : nowrap;
  opacity            : 0;
  pointer-events     : none;
  transition         : opacity var(--dur-fast) var(--ease-out),
                       translate var(--dur-fast) var(--ease-out);
}

.dock-launch:hover .dock-tooltip {
  opacity   : 1;
  translate : -50% -4px;
}

.dock-separator {
  inline-size   : 2px;
  block-size    : 2rem;
  margin-inline : var(--space-2);
  background    : oklch(60% 0.01 250 / 0.4);
  border-radius : 1px;
  flex-shrink   : 0;
}

.dock-window-dot {
  position           : absolute;
  inset-block-end    : 0;
  inset-inline-start : 50%;
  translate          : -50% 0;
  inline-size        : 0.25rem;
  block-size         : 0.25rem;
  border-radius      : var(--radius-full);
  background         : var(--dock-dot);
  opacity            : 0.8;
  transition         : opacity var(--dur-fast) var(--ease-out);
}

.dock-launch--active {
  background : var(--icon-selected-bg);

  & .dock-window-dot {
    opacity : 1;
  }
}

.dock-launch--minimized {
  opacity : 0.55;
}

/* ========== TOAST ========== */
.toast {
  position        : fixed;
  inset-block-end : var(--space-16);
  inset-inline-end: var(--space-6);
  z-index         : var(--z-toast);
  padding-inline  : var(--space-4);
  padding-block   : var(--space-3);
  border-radius   : var(--radius-lg);
  background      : var(--surface-overlay);
  border          : 1px solid var(--border-subtle);
  box-shadow      : var(--shadow-md);
  font-size       : var(--text-sm);
  color           : var(--text-primary);
  animation       : toast-in var(--dur-slow) var(--ease-spring) both;
  max-inline-size : 20rem;
}

/* ========== MUSIC PLAYER ========== */
.music-player {
  position        : relative;
  display         : flex;
  flex-direction  : column;
  gap             : 0;
  block-size      : 100%;
  overflow        : hidden;
}

/* Hide scrollbar on the window content when music player is shown */
.app-window-content:has(.music-player) {
  overflow : hidden;
  padding  : 0;
  background : var(--surface-window);
}

.app-window-content:has(.video-player) {
  background : var(--surface-window);
}

/* Terminal fills the entire window content area */
.app-window-content:has(.terminal-container) {
  overflow : hidden;
  padding  : 0;
  background : var(--surface-window);
}

.music-player-row {
  display       : flex;
  align-items   : center;
  gap           : var(--space-4);
  padding       : var(--space-2) var(--space-3);
  border-radius : var(--radius-md);
  background    : var(--surface-raised);
}

.music-player-art {
  position        : relative;
  inline-size     : 56px;
  block-size      : 56px;
  flex-shrink     : 0;
  border-radius   : 50%;
  background      : linear-gradient(135deg, var(--icon-selected-bg), var(--surface-raised));
  display         : flex;
  align-items     : center;
  justify-content : center;
}

.music-player-art-ring {
  position      : absolute;
  inset         : -3px;
  border-radius : 50%;
  border        : 2px solid transparent;
  transition    : border-color 0.4s var(--ease-out);
}

.music-player-art-ring.active {
  border-color : var(--c-accent);
  animation    : ring-pulse 2s ease-in-out infinite;
}

.music-player-art-icon {
  font-size  : 1.75rem;
  display    : block;
  transition : transform 0.3s var(--ease-out);
}

.music-player-art-icon.spinning {
  animation : disc-spin 3s linear infinite;
}

.music-player-body {
  flex            : 1;
  min-inline-size : 0;
}

.music-player-info {
  margin-block-end : var(--space-2);
}

.music-player-title {
  font-size      : var(--text-base);
  font-weight    : 700;
  color          : var(--text-primary);
  margin         : 0;
  white-space    : nowrap;
  overflow       : hidden;
  text-overflow  : ellipsis;
}

.music-player-artist {
  font-size      : var(--text-xs, 0.75rem);
  color          : var(--text-secondary);
  margin         : 2px 0 0;
  white-space    : nowrap;
  overflow       : hidden;
  text-overflow  : ellipsis;
}

.music-player-progress {
  inline-size : 100%;
}

.music-player-bar {
  block-size    : 3px;
  border-radius : 1.5px;
  background    : var(--surface-overlay);
  overflow      : hidden;
  position      : relative;
}

.music-player-bar--seekable {
  cursor        : pointer;
  block-size    : 8px;
  border-radius : 4px;
}

.music-player-bar-hover {
  position           : absolute;
  inset-block        : 0;
  inset-inline-start : 0;
  border-radius      : 4px;
  pointer-events     : none;
  z-index            : 2;
}

.seek-preview--forward {
  background : color-mix(in srgb, #8ed8ff 70%, transparent);
}

.seek-preview--backward {
  background : color-mix(in srgb, #ff9aa2 65%, transparent);
}

.seek-fill--backward {
  background : color-mix(in srgb, #8ed8ff 85%, transparent);
}

.music-player-bar-fill {
  position      : relative;
  block-size    : 100%;
  background    : var(--c-accent);
  border-radius : 4px;
  transition    : width 0.3s linear;
  z-index       : 1;
}

.music-player-times {
  display            : flex;
  justify-content    : space-between;
  font-size          : 0.65rem;
  font-family        : var(--font-mono);
  color              : var(--text-secondary);
  margin-block-start : 2px;
}

.music-player-controls {
  flex-shrink : 0;
  display     : flex;
  align-items : center;
  gap         : 4px;
}

.music-player-btn {
  border-radius   : 50%;
  background      : var(--icon-selected-bg);
  color           : var(--c-accent);
  display         : flex;
  align-items     : center;
  justify-content : center;
  transition      : background var(--dur-fast) var(--ease-out),
                    transform var(--dur-fast) var(--ease-out),
                    box-shadow var(--dur-fast) var(--ease-out);
  cursor          : pointer;

  &:hover {
    background : var(--c-accent);
    color      : var(--c-white);
    transform  : scale(1.1);
  }

  &:disabled {
    opacity    : 0.4;
    cursor     : default;
    transform  : none;
    box-shadow : none;
  }
}

.music-player-btn--main {
  inline-size : 44px;
  block-size  : 44px;
  font-size   : 1.2rem;
}

.music-player-btn--sm {
  inline-size : 30px;
  block-size  : 30px;
  font-size   : 0.75rem;
}

.music-player-btn--active {
  background : var(--c-accent);
  color      : var(--c-white);

  &:hover {
    background : var(--c-accent-hover);
  }
}

/* --- EQ Visualizer Bars --- */
.music-player-eq {
  display         : flex;
  align-items     : flex-end;
  justify-content : center;
  gap             : 3px;
  margin-block-start : auto;
  block-size      : 40px;
  padding-block-end : var(--space-1);
  padding-inline  : var(--space-4);
}

.eq-bar {
  display       : block;
  inline-size   : 4px;
  min-block-size: 4px;
  border-radius : 1px;
  background    : var(--icon-selected-bg);
  transition    : block-size 60ms linear, background 0.3s ease;
}

.music-player-eq.active .eq-bar {
  background : var(--c-accent);
}

/* --- Volume Control --- */
.music-player-volume {
  display       : flex;
  align-items   : center;
  gap           : var(--space-2);
  padding-inline: var(--space-5);
}

.music-player-volume-icon {
  flex-shrink : 0;
}

.music-player-volume-slider {
  flex           : 1;
  appearance     : none;
  block-size     : 4px;
  border-radius  : 2px;
  background     : var(--surface-overlay);
  outline        : none;
  cursor         : pointer;
  transition     : block-size var(--dur-fast) var(--ease-out);

  &:hover {
    block-size : 6px;
  }

  &::-webkit-slider-thumb {
    appearance     : none;
    inline-size    : 12px;
    block-size     : 12px;
    border-radius  : 50%;
    background     : var(--c-accent);
    cursor         : pointer;
    box-shadow     : 0 0 4px var(--c-accent);
    transition     : transform var(--dur-fast) var(--ease-out),
                     box-shadow var(--dur-fast) var(--ease-out);
  }

  &::-moz-range-thumb {
    inline-size    : 12px;
    block-size     : 12px;
    border         : none;
    border-radius  : 50%;
    background     : var(--c-accent);
    cursor         : pointer;
    box-shadow     : 0 0 4px var(--c-accent);
  }

  &:hover::-webkit-slider-thumb {
    transform  : scale(1.3);
    box-shadow : 0 0 8px var(--c-accent);
  }

  &:hover::-moz-range-thumb {
    transform  : scale(1.3);
    box-shadow : 0 0 8px var(--c-accent);
  }
}

.music-player-volume-pct {
  flex-shrink    : 0;
  inline-size    : 3ch;
  font-size      : 0.65rem;
  font-family    : var(--font-mono);
  color          : var(--text-secondary);
  text-align     : end;
  user-select    : none;
}

.music-player-status {
  position       : absolute;
  inset-inline   : 0;
  block-end      : 0;
  font-size      : 0.65rem;
  color          : var(--text-secondary);
  text-align     : center;
  margin         : 0;
  padding-block  : var(--space-1);
  padding-inline : var(--space-4);
  white-space    : nowrap;
  overflow       : hidden;
  text-overflow  : ellipsis;
  background     : var(--surface-window);
}

/* ========== VIDEO PLAYER ========== */
.video-player {
  position        : relative;
  inline-size     : 100%;
  block-size      : 100%;
  background      : var(--surface-window);
  display         : flex;
  flex-direction  : column;
  overflow        : hidden;
}

.video-player-frame {
  position       : relative;
  flex           : 1;
  min-block-size : 0;
  background     : #000;
}

/* Transparent click-interceptor over the iframe.
   Prevents YouTube's native link / fullscreen handling
   and routes all clicks through our custom controls. */
.video-player-overlay {
  position : absolute;
  inset    : 0;
  z-index  : 1;
  cursor   : pointer;
}

/* Lite facade — static thumbnail shown before first play */
.video-player-poster {
  position    : absolute;
  inset       : 0;
  inline-size : 100%;
  block-size  : 100%;
  object-fit  : cover;
}

.video-player-facade-play {
  position         : absolute;
  inset            : 0;
  display          : flex;
  align-items      : center;
  justify-content  : center;
  background       : none;
  border           : none;
  cursor           : pointer;
  z-index          : 1;
  transition       : opacity 0.2s ease;

  &:hover {
    opacity : 0.85;
  }

  & svg path:first-child {
    fill         : #f00;
    fill-opacity : 1;
  }
}

/* Make the YT-injected iframe fill the container */
.video-player-frame iframe {
  inline-size : 100%;
  block-size  : 100%;
  border      : none;
}

/* --- Controls bar (below video) --- */
.video-player-controls {
  flex-shrink      : 0;
  display          : flex;
  flex-direction   : column;
  background       : var(--surface-window);
}

/* --- Seek bar --- */
.video-player-bar {
  block-size       : 8px;
  border-radius    : 4px;
  background       : var(--surface-overlay);
  cursor           : pointer;
  position         : relative;
  overflow         : hidden;
  margin-block-end : var(--space-2);
}

.video-player-bar-hover {
  position           : absolute;
  inset-block        : 0;
  inset-inline-start : 0;
  border-radius      : 4px;
  pointer-events     : none;
  z-index            : 2;
}

.video-player-bar-fill {
  position      : relative;
  block-size    : 100%;
  border-radius : 4px;
  background    : var(--c-accent);
  transition    : width 0.3s linear;
  z-index       : 1;
}

/* --- Controls row --- */
.video-player-controls-row {
  display     : flex;
  align-items : center;
  gap         : var(--space-2);
}

/* --- Time --- */
.video-player-time {
  font-size   : 0.7rem;
  font-family : var(--font-mono);
  color       : var(--text-secondary);
  white-space : nowrap;
}

/* --- Spacer --- */
.video-player-spacer {
  flex : 1;
}

/* --- Volume slider --- */
.video-player-volume {
  inline-size      : 60px;
  block-size       : 4px;
  accent-color     : var(--c-accent);
  cursor           : pointer;
  appearance       : auto;
}

/* ========== KEYFRAME ANIMATIONS ========== */
@keyframes window-open {
  from {
    opacity   : 0;
    transform : scale(0.92) translateY(8px);
  }
}

@keyframes nope-peek {
  0% {
    opacity   : 0;
    transform : translate(-50%, 34%);
  }

  35% {
    opacity   : 1;
    transform : translate(-50%, calc(-92% - 3px));
  }

  65% {
    opacity   : 1;
    transform : translate(-50%, calc(-92% - 3px));
  }

  100% {
    opacity   : 0;
    transform : translate(-50%, 34%);
  }
}

@keyframes toast-in {
  from {
    opacity   : 0;
    transform : translateX(1rem);
  }
}

@keyframes disc-spin {
  from { transform : rotate(0deg); }
  to   { transform : rotate(360deg); }
}

/* eq-bounce removed — bars are now driven by Web Audio FFT data */

@keyframes ring-pulse {
  0%, 100% { opacity : 1; }
  50%      { opacity : 0.3; }
}

@keyframes dropdown-in {
  from {
    opacity   : 0;
    transform : translateY(-4px);
  }
}

/* ========== SHARED NOTIFICATION STACK (Desktop + Mobile) ========== */
.notification-toast-stack {
  pointer-events : none;
}

.notification-toast-stack--desktop {
  position         : fixed;
  inset-block-end  : var(--space-8);
  inset-inline-end : var(--space-6);
  z-index          : calc(var(--z-toast) + 1);
  display          : flex;
  flex-direction   : column-reverse;
  align-items      : flex-end;
  gap              : var(--space-3);
}

.notification-toast-card {
  position                 : relative;
  display                  : grid;
  gap                      : 0.125rem;
  padding                  : var(--space-3);
  border-radius            : var(--radius-xl);
  background               : var(--surface-overlay);
  border                   : 1px solid var(--border-default);
  box-shadow               : var(--shadow-lg);
  backdrop-filter          : blur(18px) saturate(1.2);
  -webkit-backdrop-filter  : blur(18px) saturate(1.2);
  pointer-events           : auto;
  cursor                   : grab;
  touch-action             : pan-y;
  opacity                  : 0;
  transition               : opacity var(--dur-normal) var(--ease-out),
                             transform var(--dur-normal) var(--ease-spring);
}

.notification-toast-card--desktop {
  inline-size : min(21rem, calc(100vw - (var(--space-6) * 2)));
  max-inline-size : 21rem;
  transform   : translate3d(0, calc(100% + var(--space-3)), 0);
}

.notification-toast-card--desktop[data-visible="false"][data-entry-origin="stack"] {
  transform : translate3d(0, 0.4rem, 0);
}

.notification-toast-card[data-visible="true"] {
  opacity        : 1;
  transform      : translate3d(0, 0, 0);
  pointer-events : auto;
}

.notification-toast-card[data-clickable="true"] {
  cursor : pointer;
}

.notification-toast-card:active {
  cursor : grabbing;
}

.notification-toast-card[data-closing="true"] {
  pointer-events : none;
}

.notification-toast-meta {
  display         : flex;
  align-items     : center;
  justify-content : space-between;
  gap             : var(--space-2);
  font-size       : var(--text-xs);
  color           : var(--text-muted);
}

.notification-toast-app {
  font-weight : 600;
  color       : var(--text-secondary);
}

.notification-toast-time {
  font-family : var(--font-mono);
}

.notification-toast-title {
  font-size   : var(--text-sm);
  font-weight : 700;
  line-height : var(--leading-tight);
  color       : var(--text-primary);
}

.notification-toast-message {
  font-size   : var(--text-sm);
  line-height : var(--leading-relaxed);
  color       : var(--text-secondary);
}

.notification-toast-cta-list {
  display            : grid;
  gap                : 0.375rem;
  margin-block-start : var(--space-2);
  pointer-events     : none;
}

.notification-toast-cta-list[hidden] {
  display : none;
}

.notification-toast-cta-bar {
  display         : flex;
  align-items     : center;
  justify-content : space-between;
  gap             : 0.5rem;
  min-block-size  : 1.5rem;
  padding-inline  : 0.625rem;
  border-radius   : 999px;
  border          : 1px solid transparent;
  font-size       : var(--text-xs);
  line-height     : 1;
  color           : var(--text-secondary);
  user-select     : none;
}

.notification-toast-cta-bar--soft {
  background   : oklch(100% 0 0 / 0.07);
  border-color : oklch(100% 0 0 / 0.06);
}

.notification-toast-cta-bar--outline {
  background   : transparent;
  border-color : var(--border-default);
}

.notification-toast-cta-bar--accent {
  background   : var(--icon-selected-bg);
  border-color : oklch(100% 0 0 / 0.08);
  color        : var(--text-primary);
}

.notification-toast-cta-bar-label {
  display         : inline-flex;
  align-items     : center;
  gap             : 0.35rem;
  min-inline-size : 0;
  white-space     : nowrap;
  font-weight     : 600;
}

.notification-toast-cta-bar-icon {
  display       : inline-grid;
  place-items   : center;
  inline-size   : 0.9rem;
  block-size    : 0.9rem;
  border-radius : 999px;
  flex-shrink   : 0;
  font-size     : 0.75rem;
  background    : oklch(100% 0 0 / 0.08);
  color         : currentColor;
}

.notification-toast-cta-bar--accent .notification-toast-cta-bar-icon {
  background : oklch(100% 0 0 / 0.14);
}

.notification-toast-cta-bar-trailing {
  font-size   : 0.7rem;
  white-space : nowrap;
  color       : var(--text-muted);
}

.notification-toast-cta-bar--accent .notification-toast-cta-bar-trailing {
  color : color-mix(in oklab, var(--text-primary) 82%, transparent);
}

/* ========== ABOUT SITE MODAL ========== */
.about-modal-backdrop {
  position        : fixed;
  inset           : 0;
  z-index         : calc(var(--z-toast) + 10);
  display         : flex;
  align-items     : center;
  justify-content : center;
  background      : oklch(0% 0 0 / 0.45);
  backdrop-filter  : none;
  animation       : about-modal-backdrop-in var(--dur-normal) var(--ease-out) both;
}

.about-modal {
  inline-size     : 20rem;
  padding         : var(--space-6);
  border-radius   : var(--radius-xl);
  background      : var(--surface-overlay);
  border          : 1px solid var(--border-default);
  box-shadow      : var(--shadow-xl);
  text-align      : center;
  animation       : about-modal-in var(--dur-slow) var(--ease-spring) both;
}

.about-modal-close-row {
  display         : flex;
  justify-content : flex-start;
  margin-block-end: var(--space-2);
}

.about-modal-close {
  display         : inline-flex;
  align-items     : center;
  justify-content : center;
  inline-size     : 0.75rem;
  block-size      : 0.75rem;
  border-radius   : var(--radius-full);
  background      : var(--c-red);
  border          : none;
  cursor          : pointer;
  transition      : opacity var(--dur-fast) var(--ease-out);
  padding         : 0;

  &:hover {
    opacity : 0.8;
  }
}

.about-modal-close-dot {
  display       : none;
}

.about-modal-close:hover .about-modal-close-dot {
  display       : block;
  inline-size   : 0.375rem;
  block-size    : 0.375rem;
  color         : oklch(20% 0 0);
}

.about-modal-icon {
  font-size        : 3rem;
  line-height      : 1;
  margin-block-end : var(--space-3);
}

.about-modal-title {
  font-size        : var(--text-lg);
  font-weight      : 700;
  color            : var(--text-primary);
  margin-block-end : var(--space-1);
}

.about-modal-version {
  font-size        : var(--text-xs);
  color            : var(--text-muted);
  margin-block-end : var(--space-3);
}

.about-modal-desc {
  font-size        : var(--text-sm);
  line-height      : var(--leading-normal);
  color            : var(--text-secondary);
  margin-block-end : var(--space-3);
}

.about-modal-author {
  font-size        : var(--text-sm);
  font-weight      : 600;
  color            : var(--text-primary);
  margin-block-end : var(--space-3);
}

.about-modal-links {
  display          : flex;
  align-items      : center;
  justify-content  : center;
  gap              : var(--space-2);
  margin-block-end : var(--space-4);
  font-size        : var(--text-sm);

  & a {
    color      : var(--c-accent);
    transition : color var(--dur-fast) var(--ease-out);

    &:hover {
      color : var(--c-accent-hover);
    }
  }
}

.about-modal-sep {
  color : var(--text-muted);
}

.about-modal-copy {
  font-size : var(--text-xs);
  color     : var(--text-muted);
}

/* Vue transition hooks for AboutSiteModal */
.about-modal-enter-active .about-modal-backdrop,
.about-modal-enter-active {
  animation : about-modal-backdrop-in var(--dur-normal) var(--ease-out) both;
}

.about-modal-leave-active {
  animation : about-modal-backdrop-in var(--dur-fast) var(--ease-out) reverse both;
}

@keyframes about-modal-backdrop-in {
  from { opacity : 0; }
}

@keyframes about-modal-in {
  from {
    opacity   : 0;
    transform : scale(0.85) translateY(8px);
  }
}

/* ========== UNIFIED MEDIA PLAYER ========== */
.app-window-content:has(.unified-media-player) {
  overflow    : hidden;
  padding     : 0;
  background : var(--surface-window);
}

.unified-media-player {
  position       : relative;
  display        : flex;
  flex-direction : column;
  gap            : var(--space-3);
  inline-size    : 100%;
  block-size     : 100%;
  min-block-size : 0;
  padding        : var(--space-3);
  background     : var(--surface-window);
  color          : var(--text-primary);
  overflow       : hidden;
}

.unified-media-player__audio {
  display : none;
}

.unified-media-player__visual {
  position       : relative;
  flex-shrink    : 0;
  min-inline-size: 0;
}

.unified-media-player__visual--art {
  inline-size   : min(100%, 26rem);
  align-self    : center;
  aspect-ratio  : 1;
  border-radius : var(--radius-xl);
  overflow      : hidden;
  border        : 1px solid var(--border-subtle);
  background    : linear-gradient(180deg, oklch(23% 0.03 6), oklch(14% 0.02 8));
  box-shadow    : inset 0 0 0 1px oklch(100% 0 0 / 0.03);
}

.unified-media-player__art-image {
  inline-size   : 100%;
  block-size    : 100%;
  object-fit    : cover;
  object-position: 50% 22%;
  display       : block;
}

.unified-media-player__visual--video {
  background     : #000;
  overflow       : hidden;
  min-block-size : 0;
}

.unified-media-player--video .unified-media-player__visual--video {
  border-radius : var(--radius-xl);
  border        : 1px solid var(--border-subtle);
  aspect-ratio  : 16 / 9;
}

.unified-media-player__video-wrapper {
  inline-size   : 100%;
  block-size    : 100%;
  min-block-size: 0;
}

.unified-media-player__video-frame {
  position       : relative;
  inline-size    : 100%;
  block-size     : 100%;
  min-block-size : 0;
  background     : #000;
}

.unified-media-player__video-poster {
  position    : absolute;
  inset       : 0;
  inline-size : 100%;
  block-size  : 100%;
  object-fit  : cover;
}

.unified-media-player__video-facade-play {
  position        : absolute;
  inset           : 0;
  display         : grid;
  place-items     : center;
  pointer-events  : none;
  z-index         : 1;
}

.unified-media-player__video-facade-play-button {
  display       : grid;
  place-items   : center;
  padding       : 0;
  border        : none;
  background    : none;
  color         : inherit;
  cursor        : pointer;
  line-height   : 0;
  pointer-events: auto;
  touch-action  : manipulation;
  transition    : opacity var(--dur-fast) var(--ease-out);

  &:hover {
    opacity : 0.86;
  }
}

.unified-media-player__video-overlay {
  position     : absolute;
  inset        : 0;
  z-index      : 1;
  cursor       : pointer;
  touch-action : manipulation;
}

.unified-media-player__yt-target {
  inline-size : 100%;
  block-size  : 100%;
}

.unified-media-player__video-frame iframe {
  inline-size : 100%;
  block-size  : 100%;
  border      : none;
}

.unified-media-player__body {
  display        : flex;
  flex-direction : column;
  flex           : 1 1 auto;
  gap            : var(--space-3);
  min-block-size : 0;
  min-inline-size: 0;
  padding        : var(--space-2) 0 0;
}

.unified-media-player__meta {
  min-inline-size : 0;
}

.unified-media-player__meta--with-disc {
  display               : grid;
  grid-template-columns : auto minmax(0, 1fr);
  grid-template-rows    : auto auto;
  column-gap            : var(--space-3);
  align-items           : center;
}

.unified-media-player__meta--with-action {
  grid-template-columns : auto minmax(0, 1fr) auto;
}

.unified-media-player__title-disc {
  position        : relative;
  inline-size     : 56px;
  block-size      : 56px;
  flex-shrink     : 0;
  display         : inline-flex;
  align-items     : center;
  justify-content : center;
  align-self      : center;
  border-radius   : 50%;
  background      : linear-gradient(135deg, var(--icon-selected-bg), var(--surface-raised));
  box-shadow      : 0 0 0 1px oklch(100% 0 0 / 0.05),
                    0 10px 24px oklch(0% 0 0 / 0.24),
                    0 0 14px color-mix(in srgb, var(--c-accent) 10%, transparent);
  transition      : box-shadow var(--dur-fast) var(--ease-out),
                    transform var(--dur-fast) var(--ease-out);
}

.unified-media-player__meta--with-disc .unified-media-player__title-disc {
  grid-column : 1;
  grid-row    : 1 / span 2;
}

.unified-media-player__meta--with-disc .unified-media-player__title {
  grid-column : 2;
  grid-row    : 1;
}

.unified-media-player__meta--with-disc .unified-media-player__subtitle {
  grid-column : 2;
  grid-row    : 2;
}

.unified-media-player__meta-action {
  grid-column     : 3;
  grid-row        : 1 / span 2;
  justify-self    : end;
  align-self      : center;
  inline-size     : 2.35rem;
  block-size      : 2.35rem;
  flex-shrink     : 0;

  svg {
    display : block;
  }
}

.unified-media-player__title-disc-icon {
  position   : relative;
  z-index    : 1;
  font-size  : 1.75rem;
  line-height: 1;
  display    : block;
  filter     : drop-shadow(0 1px 2px oklch(0% 0 0 / 0.32));
  transition : transform 0.3s var(--ease-out);
}

.unified-media-player__title-disc-icon--spinning {
  animation : disc-spin 3s linear infinite;
}

.unified-media-player__title-disc-ring {
  position      : absolute;
  inset         : -3px;
  border-radius : 50%;
  border        : 2px solid transparent;
  transition    : border-color 0.4s var(--ease-out),
                  box-shadow 0.4s var(--ease-out);
}

.unified-media-player__title-disc--active {
  box-shadow : 0 0 0 1px oklch(100% 0 0 / 0.06),
               0 10px 24px oklch(0% 0 0 / 0.24),
               0 0 24px color-mix(in srgb, var(--c-accent) 38%, transparent),
               0 0 42px color-mix(in srgb, var(--c-accent) 18%, transparent);
}

.unified-media-player__title-disc-ring--active {
  border-color : var(--c-accent);
  box-shadow   : 0 0 0 2px color-mix(in srgb, var(--c-accent) 18%, transparent);
  animation    : ring-pulse 2s ease-in-out infinite;
}

.unified-media-player__title {
  min-inline-size: 0;
  margin        : 0;
  font-size     : var(--text-base);
  font-weight   : 700;
  line-height   : 1.15;
  color         : var(--text-primary);
  white-space   : nowrap;
  overflow      : hidden;
  text-overflow : ellipsis;
}

.unified-media-player__subtitle {
  margin        : 0.2rem 0 0;
  font-size     : var(--text-sm);
  color         : var(--text-secondary);
  white-space   : nowrap;
  overflow      : hidden;
  text-overflow : ellipsis;
}

.unified-media-player--mobile .unified-media-player__title {
  font-size : clamp(1.1rem, 1rem + 0.75vw, 1.4rem);
}

.unified-media-player--mobile .unified-media-player__subtitle {
  font-size : var(--text-base);
}

.unified-media-player__progress {
  display        : flex;
  flex-direction : column;
  gap            : 0.35rem;
}

.unified-media-player__seek-track {
  position      : relative;
  block-size    : 8px;
  border-radius : 999px;
  background    : var(--surface-overlay);
  overflow      : hidden;
  cursor        : pointer;
  touch-action  : none;
}

.unified-media-player__seek-hover {
  position           : absolute;
  inset-block        : 0;
  inset-inline-start : 0;
  border-radius      : inherit;
  pointer-events     : none;
  z-index            : 2;
}

.unified-media-player__seek-fill {
  position      : relative;
  block-size    : 100%;
  border-radius : inherit;
  background    : var(--c-accent);
  transition    : width 0.3s linear;
  z-index       : 1;
}

.unified-media-player__times {
  display         : flex;
  justify-content : space-between;
  gap             : var(--space-3);
  font-family     : var(--font-mono);
  font-size       : 0.72rem;
  color           : var(--text-secondary);
}

.unified-media-player__transport {
  display         : flex;
  align-items     : center;
  justify-content : center;
  margin-block-start: auto;
  gap             : var(--space-2);
}

.unified-media-player__btn {
  display         : inline-flex;
  align-items     : center;
  justify-content : center;
  border          : none;
  border-radius   : 999px;
  background      : var(--icon-selected-bg);
  color           : var(--c-accent);
  cursor          : pointer;
  transition      : background var(--dur-fast) var(--ease-out),
                    transform var(--dur-fast) var(--ease-out),
                    box-shadow var(--dur-fast) var(--ease-out);
  touch-action    : manipulation;

  &:focus-visible {
    outline        : 2px solid color-mix(in srgb, var(--c-accent) 70%, white);
    outline-offset : 2px;
  }

  &:disabled {
    opacity    : 0.4;
    cursor     : default;
    transform  : none;
    box-shadow : none;
  }
}

@media (hover: hover) and (pointer: fine) {
  .unified-media-player__btn:hover {
    background : var(--c-accent);
    color      : var(--c-white);
    transform  : scale(1.08);
  }

  .unified-media-player__btn--active:hover {
    background : var(--c-accent-hover);
  }
}

.unified-media-player__btn--main {
  inline-size : 3.4rem;
  block-size  : 3.4rem;
}

.unified-media-player__btn--sm {
  inline-size : 2.1rem;
  block-size  : 2.1rem;
}

.unified-media-player__btn--active {
  background : var(--c-accent);
  color      : var(--c-white);
}

.unified-media-player__aux {
  display         : flex;
  align-items     : center;
  justify-content : space-between;
  gap             : var(--space-3);
}

.unified-media-player__volume {
  display        : flex;
  align-items    : center;
  gap            : var(--space-2);
  flex           : 1;
  min-inline-size: 0;
}

.unified-media-player__volume-icon {
  flex-shrink : 0;
}

.unified-media-player__volume-slider {
  flex          : 1;
  min-inline-size: 0;
  appearance    : none;
  block-size    : 4px;
  border-radius : 999px;
  background    : var(--surface-overlay);
  cursor        : pointer;
  transition    : block-size var(--dur-fast) var(--ease-out);

  &:hover {
    block-size : 6px;
  }

  &::-webkit-slider-thumb {
    appearance    : none;
    inline-size   : 12px;
    block-size    : 12px;
    border-radius : 50%;
    background    : var(--c-accent);
    box-shadow    : 0 0 6px color-mix(in srgb, var(--c-accent) 80%, transparent);
  }

  &::-moz-range-thumb {
    inline-size   : 12px;
    block-size    : 12px;
    border        : none;
    border-radius : 50%;
    background    : var(--c-accent);
    box-shadow    : 0 0 6px color-mix(in srgb, var(--c-accent) 80%, transparent);
  }
}

.unified-media-player__volume-pct {
  flex-shrink : 0;
  inline-size : 3ch;
  font-family : var(--font-mono);
  font-size   : 0.72rem;
  color       : var(--text-secondary);
  text-align  : end;
}

.unified-media-player__eq {
  display           : flex;
  align-items       : flex-end;
  justify-content   : center;
  gap               : 3px;
  min-block-size    : 40px;
  block-size        : 40px;
  padding-inline    : var(--space-2);
  padding-block-end : var(--space-1);
  flex-shrink       : 0;
}

.unified-media-player__eq .eq-bar {
  display        : block;
  inline-size    : 4px;
  min-block-size : 4px;
  border-radius  : 1px;
  background     : var(--icon-selected-bg);
  transition     : block-size 60ms linear, background 0.3s ease;
}

.unified-media-player__eq--active .eq-bar {
  background : var(--c-accent);
}

/* ========== REDUCED MOTION ========== */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration        : 0.01ms !important;
    animation-iteration-count : 1 !important;
    transition-duration       : 0.01ms !important;
  }
}

/* ========== UTILITIES ========== */
.sr-only {
  position    : absolute;
  inline-size : 1px;
  block-size  : 1px;
  padding     : 0;
  margin      : -1px;
  overflow    : hidden;
  clip        : rect(0, 0, 0, 0);
  white-space : nowrap;
  border      : 0;
}
